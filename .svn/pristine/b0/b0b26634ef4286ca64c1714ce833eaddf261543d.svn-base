<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>信息审批人</title>
<link href="../../css/app.css" type="text/css" rel="stylesheet" />
<link href="../../css/zx-all.css" rel="stylesheet" type="text/css" />
<script language="Javascript" src="../../js/zx-all.js"> </script>

<style type="text/css">
.textright {
	text-align: right;
}

.textleft {
	text-align: left;
}
/*input_tb css*/
.input_tb_new {
	/*border:1px solid #dfdfdf;*/
	width: 100%;
	margin-bottom: 10px;
}

.input_tb_new a {
	color: #056aff;
	text-decoration: none;
	font-weight: normal;
}

.input_tb_new td {
	height: 35px;
	line-height: 25px;
	/*border-bottom:1px dashed #d5d5d5;*/
	padding-top: 3px;
}

.input_tb_new .tr_title td {
	background-color: #f5f8ff;
	padding-left: 16px;
	font-weight: bold;
	height: 30px;
	line-height: 30px;
	/*border-bottom:1px solid #dfdfdf;*/
}

.input_tb_new .tr_last td {
	border-bottom: 0;
}

.input_tb_new .title {
	text-align: right;
}

.input_tb_new .subtitle {
	text-align: left;
	background-color: #d2e1fd;
	border-top: 1px solid #fff;
	/*border-left:1px solid #fff;*/
}

.input_tb_new .tr_btn_input td {
	background-color: #fbfbfb;
	/*border-top:1px solid #dbdbdb;*/
	/*height:40px;*/
}

.title_tb {
	background-color: #f5f8ff;
	padding-left: 16px;
	font-weight: bold;
	height: 30px;
	line-height: 30px;
	/*border:1px solid #dfdfdf;8/
border-bottom:0;
}
.title_tb .title_txt{
float:left;
}
.title_tb .title_btn{
float:right;
margin-top:2px;
font-weight:normal;
}
.input_tb_new td {
    /*border-bottom: 1px dashed #D5D5D5;*/
	height: 35px;
	line-height: 25px;
	padding-top: 3px;
}

.data_tb td {
	height: 30px;
	line-height: 24px;
	padding-left: 10px;
	border-bottom: 1px dashed #e3e4e6;
	text-align: left;
}

#huankuan {
	text-align: left;
}
</style>


</head>
<body>
	<div class="tab_titleT">
		<!--查询条件  begin-->
		<table width="100%" border="0" cellspacing="0" cellpadding="0">
			<tr valign="bottom" id='trtab1'>
				<td class="tabbody1" id="tabbody1" onclick="changeTab('ctinfo');"
					tabname='mytab' style="width: 33%"><div align="center">客户信息</div></td>
				<td class="tabbody2" id="tabbody2" onclick="changeTab('bainfo');"
					tabname='mytab' style="width: 33%"><div align="center">企业基本情况</div></td>
				<td class="tabbody3" id="tabbody3" onclick="changeTab('csinfo');"
					tabname='mytab' style="width: 34%"><div align="center">法院网案件执行状态</div></td>
			</tr>
		</table>
	</div>
	<div class="pop-center overflow-au" style="top: 30px;" id="waicengdiv">
		<!-- -----------------------------------------------------------------客户信息 begin------------------------------------------------------------------ -->
		<div id="ctinfo" class="pop-formDiv clearfix"
			style="margin: 5px; margin-top: 5px;">
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title">客户信息</div>
				<div class="center-txt" style="margin-bottom: 10px; height: 200px;">
					<div class="float-l">
						<div class="pop-form-title">客户类型：</div>
						<div class="pop-form-item">
							<input type="text" id="customer_type" />
						</div>
					</div>
					<!-- 添加的虚线 -->
					<div class="line clearboth" id="info_l3"></div>
					<!-- 显示循环贷信息 -->
					<div id="xhd_div" style="display: none;">
						<div class="float-l clearboth">
							<div class="pop-form-title2">上期借款合同金额：</div>
							<div class="pop-form-item">
								<input type="text" id="last_loan_money" style="width: 156px;"
									isFloat="1" maxVal="10000" minVal="0" />万元
							</div>
						</div>
						<div class="pop-form-item">
							<div class="float-l">
								<div class="pop-form-title2">还款情况：</div>
								<div class="pop-form-item">
									<input type="text" id="repayment_status" style="width: 200px;" />
								</div>
							</div>
						</div>
						<div class="float-l" style="height: 50px;">
							<div class="pop-form-title2">逾期情况：</div>
							<div class="pop-form-item">
								<!-- style="width: 180%" -->
								<textarea id="overdue_status" name="overdue_status" class="h40"
									style="resize: none; width: 595px;" maxlength="250"
									onpropertychange="onmyinput(this)"
									oninput="return onmyinput(this)"></textarea>
							</div>
						</div>
						<div class="float-l  clearboth">
							<div class="pop-form-title2">上期合同申请日期：</div>
							<div class="pop-form-item">
								<input id="last_apply_date" class="Wdate" type="text"
									onclick="WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:true})"
									style="vertical-align: top; width: 180px;" />
							</div>
						</div>
						<div class="float-l">
							<div class="pop-form-title2">上期合同结清日期：</div>
							<div class="pop-form-item">
								<input id="last_clean_date" class="Wdate" type="text"
									onclick="WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:true})"
									style="vertical-align: top; width: 180px;" />
							</div>
						</div>
						<div class="float-l clearboth">
							<div class="pop-form-title2">信息变更：</div>
							<div class="pop-form-item">
								<textarea name="info_update" id="info_update" class="h40"
									style="resize: none; width: 595px;" maxlength="250"
									onpropertychange="onmyinput(this)"
									oninput="return onmyinput(this)"></textarea>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- ------------------------------------------------------------------------客户信息》客户类型end --------------------------------------------------------------------->
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title">犯罪记录</div>
				<div class="center-txt" style="margin-bottom: 10px; height: 200px;">
					<div class="pop-form-item">
						<textarea name="criminal_record" id="criminal_record" class="h40"
							style="resize: none; width: 900px; height: 180px;"
							maxlength="250" onpropertychange="onmyinput(this)"
							oninput="return onmyinput(this)"></textarea>
					</div>
				</div>
			</div>
			<!-- --------------------------------------------------------------------------------客户信息》通话记录---- --------------------------------------------------------------->
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title">通话记录</div>
				<div class="center-txt" style="margin-bottom: 10px; height: 280px;">
					<!-- 系统自动带出通话记录显示信息 -->
					<div id="grid_telphone_conut"></div>
					<!-- 添加的虚线 -->
					<div class="line clearboth" id="info_l3"></div>
					<!-- 追加上传附件功能 -->
					<div class="float-l">
						<div class="pop-form-title" align="right">上传附件：</div>
						<div class="pop-form-item" align="right">
							<table>
								<tr>
									<td><div style="width: 550px; height: 50px;"
											id="showOthersImage2"></div></td>
									<td id="upload_Others"><button
											onclick="openAddAttDialog('2','showOthersImage2')"
											class="btn">上传附件</button></td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
			<!-- --------------------------------------------------------------------------------客户信息》通话记录end --------------------------------------------------------------->
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title">房产调档记录</div>
				<div class="center-txt" style="margin-bottom: 10px; height: 280px;">
					房产信息
					<!-- 添加的虚线 -->
					<div class="line clearboth" id="info_l3"></div>
					<div class="float-l clearboth">
						<div class="pop-form-title">申请人姓名：</div>
						<div class="pop-form-item">
							<input type="text" id="apply_name" style="width: 156px;" />
						</div>
					</div>
					<div class="float-l ">
						<div class="pop-form-title">身份证号码：</div>
						<div class="pop-form-item">
							<input type="text" id="id_card" style="width: 156px;" />&nbsp;
							&nbsp;
						</div>
					</div>
					<div class="float-l ">
						<div class="pop-form-title">产权人：</div>
						<div class="pop-form-item">
							<input type="text" id="owner_name" style="width: 156px;" />
						</div>
					</div>
					<div class="float-l  clearboth">
						<div class="pop-form-title">共同拥有人：</div>
						<div class="pop-form-item">
							<input type="text" id="co_owner_name" style="width: 156px;" />
						</div>
					</div>
					<div class="float-l ">
						<div class="pop-form-title">房产证号：</div>
						<div class="pop-form-item">
							<input type="text" id="house_card_id" style="width: 156px;" />
						</div>
					</div>
					<div class="float-l clearboth" style="height: 50px;">
						<div class="pop-form-title">房产地址：</div>
						<div class="pop-form-item">
							<!-- style="width: 180%" -->
							<textarea id="house_address" name="house_address" class="h40"
								style="resize: none; width: 735px;" maxlength="250"
								onpropertychange="onmyinput(this)"
								oninput="return onmyinput(this)"></textarea>
						</div>
					</div>
					<!-- 添加的虚线 -->
					<div class="line clearboth" id="info_l3"></div>
					抵押信息
					<div class="line clearboth" id="info_l3"></div>
					<div class="float-l  clearboth">
						<div class="pop-form-title">权利人：</div>
						<div class="pop-form-item">
							<input type="text" id="obligee_name" style="width: 156px;" />
						</div>
					</div>
					<div class="float-l ">
						<div class="pop-form-title">抵押金额：</div>
						<div class="pop-form-item">
							<input type="text" id="mortgage_amount" style="width: 156px;" />
							元
						</div>
					</div>
					<div class="float-l ">
						<div class="pop-form-title">约定期限：</div>
						<div class="pop-form-item">
							<input type="text" id="agree_limit_time" style="width: 156px;" />
							月
						</div>
					</div>
					<div class="float-l clearboth" style="height: 50px;">
						<div class="pop-form-title">其他：</div>
						<div class="pop-form-item">
							<!-- style="width: 180%" -->
							<textarea id="other_remark" name="other_remark" class="h40"
								style="resize: none; width: 735px;" maxlength="250"
								onpropertychange="onmyinput(this)"
								oninput="return onmyinput(this)"></textarea>
						</div>
					</div>

				</div>
			</div>
			<!-- --------------------------------------------------------------------------------客户信息》房产调档记录end --------------------------------------------------------------->
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title">医保信息</div>
				<div class="center-txt" style="margin-bottom: 10px; height: 200px;">
					<!-- 需要添加工具条 -->
					<div id="toolbar-medicare" class="minwidth400"></div>
					<!-- 增加医保显示列表 -->
					<div id="grid-medicare"></div>
					<!-- 添加的虚线 -->
					<div class="line clearboth" id="info_l3"></div>
					<!-- 追加上传附件功能 -->
					<div class="float-l">
						<div class="pop-form-title" align="right">上传附件：</div>
						<div class="pop-form-item" align="right">
							<table>
								<tr>
									<td><div style="width: 550px" id="showOthersImage4"></div></td>
									<td id="upload_Others"><button
											onclick="openAddAttDialog('4','showOthersImage4')"
											class="btn">上传附件</button></td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
			<!-- --------------------------------------------------------------------------------客户信息》医保信息end --------------------------------------------------------------->
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title">公积金</div>
				<div class="center-txt" style="margin-bottom: 10px; height: 200px;">
					<!-- 需要添加工具条 -->
					<div id="toolbar-reserve" class="minwidth400"></div>
					<!-- 增加选项 -->
					<div id="grid-reserve"></div>
					<!-- 添加的虚线 -->
					<div class="line clearboth" id="info_l3"></div>
					<!-- 追加上传附件功能 -->
					<div class="float-l">
						<div class="pop-form-title" align="right">上传附件：</div>
						<div class="pop-form-item" align="right">
							<table>
								<tr>
									<td><div style="width: 550px" id="showOthersImage3"></div></td>
									<td id="upload_Others"><button
											onclick="openAddAttDialog('3','showOthersImage3')"
											class="btn">上传附件</button></td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- --------------------------------------------------------------------------------客户信》息公积金end --------------------------------------------------------------->

		<!-- ------------------------------------------------------------------客户信息 end------------------------------------------------------------------ -->

		<!-- ------------------------------------------------------------------企业基本情况 begin------------------------------------------------------------------ -->
		<div id="bainfo" class="pop-formDiv clearfix"
			style="margin: 5px; margin-top: 5px; display: none;">
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title3">企业基本情况</div>
				<!-- 企业基本信息工具条：新增 -->
				<div id="toolbar-basicbusiness" class="minwidth400"
					style="border: none; background-color: #e6f4ff; margin-bottom: 10px;"></div>
				<div id="father">
					<div id="parentpoint">
						<!-- 增加企业信息 -->
						<div id="gridbasicbusiness" class="center-txt2 "
							style="margin-bottom: 15px; height: 460px; padding-top: 10px;">
							<div class="float-l">
								<div class="pop-form-title">企业名称：</div>
								<div class="pop-form-item">
									<input type="text" id="company_name" style="width: 325px;"
										maxlength="50" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">法人：</div>
								<div class="pop-form-item">
									<input type="text" id="legal_person" style="width: 100px;"
										maxlength="50" />
								</div>
							</div>
							<div class="float-l clearboth">
								<div class="pop-form-title">企业类型：</div>
								<div class="pop-form-item">
									<input type="text" id="company_type" style="width: 100px;"
										maxlength="25" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">成立日期：</div>
								<div class="pop-form-item">
									<input id="found_date" class="Wdate" type="text"
										onclick="WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:true})"
										style="vertical-align: top; width: 100px;" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">注册日期：</div>
								<div class="pop-form-item">
									<input id="register_date" class="Wdate" type="text"
										onclick="WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:true})"
										style="vertical-align: top; width: 100px;" />
								</div>
							</div>
							<div class="float-l  clearboth">
								<div class="pop-form-title">注册号：</div>
								<div class="pop-form-item">
									<input type="text" id="register_no" style="width: 325px;"
										maxlength="25" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">营业期限：</div>
								<div class="pop-form-item">
									<input type="text" id="business_limit_date"
										style="width: 100px;" maxlength="25" />
								</div>
							</div>
							<div class="float-l clearboth">
								<div class="pop-form-title">注册地址：</div>
								<div class="pop-form-item">
									<input type="text" id="register_address" style="width: 325px;"
										maxlength="250" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">注册资金：</div>
								<div class="pop-form-item">
									<input type="text" id="register_money" style="width: 100px;"
										maxlength="13" maxVal="1000000000000" minVal="0"
										isPositiveInteger="1" />
								</div>
							</div>
							<div class="float-l clearboth">
								<div class="pop-form-title">年检年度：</div>
								<div class="pop-form-item">
									<input type="text" id="year_check" style="width: 100px;"
										maxlength="10" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">组织机构代码：</div>
								<div class="pop-form-item">
									<input type="text" id="org_code_no" style="width: 100px;"
										maxlength="100" />
								</div>
							</div>

							<div class="float-l">
								<div class="pop-form-title">纳税类型：</div>
								<div class="pop-form-item">
									<input type="text" id="pay_taxes_type" style="width: 100px;"
										maxlength="25" />
								</div>
							</div>
							<div class="float-l clearboth">
								<div class="pop-form-title">纳税状态：</div>
								<div class="pop-form-item">
									<input type="text" id="pay_taxes_status" style="width: 100px;"
										maxlength="25" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">税务登记号：</div>
								<div class="pop-form-item">
									<input type="text" id="tax_register_no" style="width: 100px;"
										maxlength="100" />
								</div>
							</div>
							<div class="float-l">
								<div class="pop-form-title">企业等级：</div>
								<div class="pop-form-item">
									<input type="hidden" id="enter_level" />
									<p onmousedown="rate(this,event,'')">
										<img src="../../images/icon_star_1.png"> <img
											src="../../images/icon_star_1.png"> <img
												src="../../images/icon_star_1.png"> <img
													src="../../images/icon_star_1.png"> <img
														src="../../images/icon_star_1.png">
									</p>
								</div>
							</div>
							<div class="float-l clearboth" style="height: 10px;"></div>
							<div class="center-content clearboth" style="min-width: 550px;">
								<div class="center-title">投资人信息</div>
								<div class="center-txt" style="margin-bottom: 5px;">
									<div id="toolbar-top" class="minwidth400"></div>
									<div id="grid-top"></div>
								</div>
							</div>
							<!-- 删除本条企业基本信息链接 -->
							<div align="right" style="margin-bottom: 10px">
								<a href="#" style="color: red; text-decoration: none;"
									onclick="deleteBaiDiv(this)">删除本条企业基本信息</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- ------------------------------------------------------------------企业基本情况 end------------------------------------------------------------------ -->

		<!-- ------------------------------------------------------------------法院网案件执行状态 begin------------------------------------------------------------------ -->
		<div id="csinfo" class="pop-formDiv clearfix"
			style="margin: 5px; margin-top: 5px; display: none;">
			<div class="float-l clearboth" style="height: 10px;"></div>
			<div class="center-content clearboth" style="min-width: 500px;">
				<div class="center-title">法院网案件执行状态</div>
				<div class="center-txt" style="margin-bottom: 10px;">
					<div id="toolbar-state" class="minwidth400"></div>
					<div id="grid-state"></div>
				</div>
			</div>
		</div>
		<!-- ------------------------------------------------------------------法院网案件执行状态 end------------------------------------------------------------------ -->
	</div>
	<!-- 提交功能按钮区 -->
	<div class="pop-footer5 clearboth" style="bottom: 1px;" id="tb_btn">
		<input id="tjbtn" onclick="sp();" class="btn-saveT"
			onmouseover="this.className='btn-saveT-over'"
			onmouseout="this.className='btn-saveT'"
			onmousedown="this.className='btn-saveT-down'" type="button"
			style="margin-right: 7px;" /> <input id="cancelBtnId"
			class="btn-cancel" onmouseover="this.className='btn-cancel-over'"
			onmouseout="this.className='btn-cancel'"
			onmousedown="this.className='btn-cancel-down'" type="button"
			onclick="closeDialog();" />
	</div>
	<script type="text/javascript">
	var wms_cre_credit_head_id = $.query.get("wms_cre_credit_head_id");//wms_cre_credit_head_id 为选择审批的记录单据主表单ID
	var taskId = $.query.get("taskId");//选择审批传递过来的该表单流程taskId
	//通话记录列表
	var grid_telphone_conut;
	//定义通话记录上传附件的数组
	var fileArrTelPhone=[];
	//医保信息列表
	var grid_medicare;
	//定义医保记录上传附件的数组
	var fileArrMedicare=[];
	//公积金信息列表
	var grid_reserve;
	//定义公积金信上传附件的数组
	var fileArrReserve=[];
	//定义企业基本信息和投资人信息的数组
    var bainfoAndDetaiList=[];
	//投资人显示列表
	var grid_top;
	//公积金信息初始化
	var init_grid_reserve_data={};
	//医保信息初始化
	var grid_medicare_data={};
	var grid_top_data = {};
	var grid_state_data = {};
	//定义返回的通讯详细信息
	var grid_telphone_count_data={};
	$(function(){
	//公积金信息初始化显示1行
	init_grid_reserve_data.Rows=[{"user_name": "","work_unit_full_name": "","medi_status": ""}];
	//医疗信息初始化显示1行
	grid_medicare_data.Rows=[{ "user_name": "","work_unit_full_name": "","medi_status": "",}];
    //企业信息投资人初始化显示框3行	
	grid_top_data.Rows = [
		               {"investor_type": "","investor": "","rfjc_money": "","funding_way": "","funding_date":"","real_funding_money":"","real_funding_way":"","real_funding_date":""},
		               {"investor_type": "","investor": "","rfjc_money": "","funding_way": "","funding_date":"","real_funding_money":"","real_funding_way":"","real_funding_date":""},
		               {"investor_type": "","investor": "","rfjc_money": "","funding_way": "","funding_date":"","real_funding_money":"","real_funding_way":"","real_funding_date":""}
	               		  ];
    //法院网案件执行状态初始化显示框3行
	grid_state_data.Rows = [
	                    {"executor_name": "","execute_status": "-1","accreditation_date": "","execute_target":""},
						{"executor_name": "","execute_status": "-1","accreditation_date": "","execute_target":""},
						{"executor_name": "","execute_status": "-1","accreditation_date": "","execute_target":""}
			              ];
	//客户信息--》医保信息工具条
	$("#toolbar-medicare").ligerToolBar({
	    items: [{
	        text: '新增',
	        click: add_medicare,
	        icon: 'add'
	    },{
	            line: true
	    },{
            text: '删除',
            click: delete_medicare,
            icon: 'delete'
			},{
                  line: true
          }]
	});
	//客户信息--》公积金信息工具条
	$("#toolbar-reserve ").ligerToolBar({
	    items: [{
	        text: '新增',
	        click: add_reserve ,
	        icon: 'add'
	    },{
	            line: true
	    },{
            text: '删除',
            click: delete_reserve ,
            icon: 'delete'
			},{
                  line: true
          }]
	});
	//企业基本信息-企业信息新增工具条
	$("#toolbar-basicbusiness").ligerToolBar({
		 items: [{
		        text: '新增',
		        click: add_basicbusinessDiv,
		        icon: 'add'
		    },{
		            line: true
		    }]
	});
	//实现企业基本信息新增
	function add_basicbusinessDiv(){
		addBaiDiv('gridbasicbusiness');
	}
	//企业基本信息-投资工具条
	$("#toolbar-top").ligerToolBar({
	    items: [{
	        text: '新增',
	        click: add_top,
	        icon: 'add'
	    },{
	            line: true
	    },{
            text: '删除',
            click: delete_top,
            icon: 'delete'
			},{
                  line: true
          }]
	});
	//法院网案件执行状态工具条
	$("#toolbar-state").ligerToolBar({
	    items: [{
	        text: '新增',
	        click: add_state,
	        icon: 'add'
	    },{
	            line: true
	    },{
            text: '删除',
            click: delete_state,
            icon: 'delete'
			},{
                  line: true
          }]
	});
	
	//初始化通话记录信息列表
    init_telphone_grid();	
	//初始化医保信息列表
    init_grid_medicare();
	//初始化公积金信息列表
	init_grid_reserve();
	//企业基本情况
	init_top_grid();
	//法院网案件执行状态
    init_state_grid();
    //下拉框 客户类型
	init_customer_type();
	//下拉框-还款情况
	init_repayment_status();
	});
	//--------------------------------------------------------------客户信息》医保信息新增和删除begin-----------------------------------------------
	//客户信息》医保信息的新增
	function add_medicare(){
	   grid_medicare.endEdit();
	   var rows = {
               "user_name": "",
               "work_unit_full_name": "",
               "medi_status": "",
           };
	 	global_ligerui_extend.addRows(grid_medicare, rows);
	}
	//客户信息》医保信息的删除
	function delete_medicare(){
	      var row = grid_medicare.getSelectedRow();
	        if (!row) {
	            globalUtil.warnMsg(globalErrorMsg['100001']); //请选择一行记录进行删除
	            return;
	        }
	        globalUtil.confirmMsg(globalErrorMsg['100016'],
	        function(yes) { //确认删除
	        	if(yes){
	        		global_ligerui_extend.deleteSelectedRow(grid_medicare);
	        	}
	        });
	}
	//--------------------------------------------------------------客户信息》医保信息新增和删除end-----------------------------------------------
	//--------------------------------------------------------------客户信息》公积金信息新增和删除begin-----------------------------------------------
	//客户信息》公积金信息的新增
	function add_reserve(){
		 grid_reserve.endEdit();
		   var rows = {
				   "user_name": "",
	               "work_unit_full_name": "",
	               "medi_status": ""
	           };
		 	global_ligerui_extend.addRows(grid_reserve, rows);
	}
	//客户信息》公积金信息的删除
	function delete_reserve(){
		 var row = grid_reserve.getSelectedRow();
	        if (!row) {
	            globalUtil.warnMsg(globalErrorMsg['100001']); //请选择一行记录进行删除
	            return;
	        }
	        globalUtil.confirmMsg(globalErrorMsg['100016'],
	        function(yes) { //确认删除
	        	if(yes){
	        		global_ligerui_extend.deleteSelectedRow(grid_reserve);
	        	}
	        });
	}
	//--------------------------------------------------------------客户信息》公积金信息新增和删除end-----------------------------------------------
	//--------------------------------------------------------------企业基本情况信息投资人信息增加和删除-------------------------------------------------------
    function add_top() {
       	grid_top.endEdit();
       	var rows = {
               "investor_type": "",
               "investor": "",
               "rfjc_money": "",
               "funding_way": "",
               "funding_date": "",
               "real_funding_money": "",
               "real_funding_way": "",
	           "real_funding_date": ""
           };
       	global_ligerui_extend.addRows(grid_top, rows);
       } 
	
    function delete_top() {
        var row = grid_top.getSelectedRow();
        if (!row) {
            globalUtil.warnMsg(globalErrorMsg['100001']); //请选择一行记录进行删除
            return;
        }
        globalUtil.confirmMsg(globalErrorMsg['100016'],
        function(yes) { //确认删除
        	if(yes){
        		global_ligerui_extend.deleteSelectedRow(grid_top);
        	}
        });
    }
     //--------------------------------------------------------------企业基本情况信息增加和删除end-------------------------------------------------------
     //--------------------------------------------------------------法院网案件执行状态增加和删除---------------------------------------------------------
     //增加一条法院网案件执行状态信息
     function add_state() {
    	grid_state.endEdit();
       	var rows = {
               "executor_name": "",
               "execute_status": "-1",
               "accreditation_date": "",
               "execute_target": ""
           };
       	global_ligerui_extend.addRows(grid_state, rows);
       }  
	//删除一条法院网案件执行状态记录
    function delete_state() {
        var row = grid_state.getSelectedRow();
        if (!row) {
            globalUtil.warnMsg(globalErrorMsg['100001']); //请选择一行记录进行删除
            return;
        }
        globalUtil.confirmMsg(globalErrorMsg['100016'],
        function(yes) { //确认删除
        	if(yes){
        		global_ligerui_extend.deleteSelectedRow(grid_state);
        	}
        });
    }
   //--------------------------------------------------------------法院网案件执行状态增加和删除end-------------------------------------------------------
	/**
	 下拉框-客户类型
	*/
	function init_customer_type(json){
		var customer_type_params ={
				dest_url:'/sysmanage/wmssysdictdatabydictid.do?isEmpty=true&wms_sys_dict_id=10',
				t_col_name:'customer_type',
				valueField:'wms_sys_dict_data_id',   //下拉框value对应的值，默认为id
				textField:'value_meaning',    //下拉框text对应的值，默认为text
				input_width:150,
				def_val:'first'
				};
		global_ligerui_extend.initCombox("customer_type",function(val){
			if(val == '46'){
				var xhd_div = document.getElementById("xhd_div");
				xhd_div.style.display='';
			}
			else if(val == '45'){
				var xhd_div = document.getElementById("xhd_div");
				xhd_div.style.display='none';
			}
		},customer_type_params);
		if(json){
			//把值装载设定
			global_ligerui_extend.syncRequestInitComboxData(json,"customer_type");
			//让其不可编辑
			global_ligerui_extend.disabledCombox("customer_type");
		}else{			
		    global_ligerui_extend.initComboxDefVal("customer_type");
		}
	}
	/**
	 下拉框-还款情况
	*/	
	function init_repayment_status(json){
		var repayment_status_params ={
				dest_url:'/sysmanage/wmssysdictdatabydictid.do?isEmpty=true&wms_sys_dict_id=11',
				t_col_name:'repayment_status',
				valueField:'wms_sys_dict_data_id',   //下拉框value对应的值，默认为id
				textField:'value_meaning',    //下拉框text对应的值，默认为text
				input_width:173,
				def_val:'first'
				};
		global_ligerui_extend.initCombox("repayment_status",null,repayment_status_params);
		if(json){
			//把值装载设定
			global_ligerui_extend.syncRequestInitComboxData(json,"repayment_status");
			//让其不可编辑
			global_ligerui_extend.disabledCombox("repayment_status");
		}else{			
		    global_ligerui_extend.initComboxDefVal("repayment_status");
		}
	}
	//---------------------------------------------------------------------------------------------通话记录-------------------------------------------------------
	function init_telphone_grid(){
		var columns = [{
            display: '手机号码',
            name: 'user_tel',
            width: 150,
            minWidth: 150,
         },{
	        display: '开卡时间',
		    name: 'card_open_time',
	        type: 'date', //日期类型必备
	        format: "yyyy-MM-dd",//日期类型必备
	        resizable: false,
	        width: 100,
	        minWidth: 120,
	        editor: { 
					type: 'date', // 该列为日期类型
	        	}   	       
	    },{
			display: '所属客户',
	        name: 'owner_name',
	        resizable: false,
	        width: 300,
	        minWidth: 300,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	    },{
			display: '详情',
	        name: 'card_remark',
	        resizable: false,
	        width: 300,
	        minWidth: 300,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:250
			    }
	       
	    }];
		//实现手机号的自动带出功能：根据主表单ID 查询该条单据联系人的手机号
		 grid_telphone_count_data= globalUtil.syncGetJson('/cremanage/wmscrecreditlinecustomerchangeheadinfolistbytel.do',{
			'wms_cre_credit_head_id': wms_cre_credit_head_id //主贷款ID 
        },'GET');
		grid_telphone_conut = $("#grid_telphone_conut").ligerGrid({
			columns: columns,
			data:grid_telphone_count_data,
			rownumbers: true,
			allowUnSelectRow: false,
			width: '100%',
	        height: 200,
	        heightDiff: -4,
			usePager: false,
			enabledEdit:true
	    });
	
	}

	//-------------------------------------------------------------------------------------------医保信息显示列表---------------------------------------------------
	function init_grid_medicare(){
		var columns = [{
			display: '姓名',
	        name: 'user_name',
	        resizable: false,
	        width: 150,
	        minWidth: 150,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	    },{
			display: '单位名称',
	        name: 'work_unit_full_name',
	        resizable: false,
	        width: 500,
	        minWidth: 500,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:50
			    }
	    },{
			display: '参保状态',
	        name: 'medi_status',
	        resizable: false,
	        width: 200,
	        minWidth: 200,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:20
			    }
	    }];
		
		grid_medicare = $("#grid-medicare").ligerGrid({
			columns: columns,
			rownumbers: true,
			allowUnSelectRow: false,
			data:grid_medicare_data,
			width: '100%',
			height: 120,
	        heightDiff: -4,
			usePager: false,
			enabledEdit:true
	    });
	}
	//--------------------------------------------------------------------------------------公积金信息显示列表-----------------------------------------------------------
	function init_grid_reserve(){
		var columns = [{
			display: '姓名',
	        name: 'user_name',
	        resizable: false,
	        width: 150,
	        minWidth: 150,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	    },{
			display: '单位名称',
	        name: 'work_unit_full_name',
	        resizable: false,
	        width: 300,
	        minWidth: 300,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	    },{
			display: '余额(元)',
	        name: 'balance_account',
	        resizable: false,
	        width: 80,
	        minWidth: 80,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	    },{
			display: '账户状态',
	        name: 'accu_status',
	        resizable: false,
	        width: 80,
	        minWidth: 80,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	    },{
			display: '起缴年月',
	        name: 'start_date',
	        resizable: false,
	        width: 140,
	        minWidth: 140,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	    },{
			display: '缴至年月',
	        name: 'end_date',
	        resizable: false,
	        width: 140,
	        minWidth: 140,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	       
	    }];
		
		grid_reserve = $("#grid-reserve").ligerGrid({
			columns: columns,
			rownumbers: true,
			allowUnSelectRow: false,
			data:init_grid_reserve_data,
			width: '100%',
	        height: 120,
	        heightDiff: -4,
			usePager: false,
			enabledEdit:true
	    });
	} 
	
	//----------------------------------------------------------------------------企业信息投资人表-----------------------------------------------------------------------
	function init_top_grid(){
		var columns = [{
			display: '投资人类型',
	        name: 'investor_type',
	        resizable: false,
	        width: 21,
	        minWidth: 80,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	       
	    }, {
	        display: '投资人',
	        name: 'investor',
	        resizable: false,
	        width: 21,
	        minWidth: 80,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:50 
			    }
	    
	    }, {
	        display: '认缴出资额',
	        name: 'rfjc_money',
	        resizable: false,
	        width: 21,
	        minWidth: 120,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:25
			    }
	       
	    }, {
	        display: '出资方式',
	        name: 'funding_way',
	        resizable: false,
	        width: 21,
	        minWidth: 100,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:25
			    }
	        
	    },{
	        display: '出资时间',
		    name: 'funding_date',
	        type: 'date', //日期类型必备
	        format: "yyyy-MM-dd",//日期类型必备
	        resizable: false,
	        width: 21,
	        minWidth: 120,
	        editor: { 
					type: 'date', // 该列为日期类型
	        	}   	       
	    },{
	        display: '实缴出资额',
	        name: 'real_funding_money',
	        resizable: false,
	        width: 21,
	        minWidth: 120,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:25 
			    }
	        },{
		        display: '出资方式',
		        name: 'real_funding_way',
		        resizable: false,
		        width: 21,
		        minWidth: 100,
		        editor: { 
					type: 'text', // 该列为可编辑状态
					maxlength:25
				    }
		        
		    },{
		        display: '出资时间',
			    name: 'real_funding_date',
		        type: 'date', //日期类型必备
		        format: "yyyy-MM-dd",//日期类型必备
		        resizable: false,
		        width: 21,
		        minWidth: 120,
		        editor: { 
						type: 'date', // 该列为日期类型
		        	}   	       
		    }];
		
	    grid_top = $("#grid-top").ligerGrid({
			columns: columns,
			rownumbers: true,
			data:grid_top_data,
			allowUnSelectRow: false,
			width: '100%',
	        height: 150,
	        heightDiff: -4,
			usePager: false,
			enabledEdit: true
	    });
	}
	//----------------------------------------------------------------------------------法院网案件执行状态开始------------------------------------------------------------
	function init_state_grid(){
		
			var jsonLoanType2 = globalUtil.syncGetJson('/sysmanage/wmssysdictdatawithoutpaginglist.do',{
			sortname: 'wms_sys_dict_data_id', // 排序列名
			sortorder: 'asc' // 排序方式
			},'POST');
			
			var departmentList = [{ "execute_status": -1, "DepartmentName": "请选择"}];
			for(var i=0;i<parseInt(jsonLoanType2.Rows.length);i++){
			if(jsonLoanType2.Rows[i].wms_sys_dict_id=="16"){
				departmentList.push({"execute_status":jsonLoanType2.Rows[i].value_code,"DepartmentName":jsonLoanType2.Rows[i].value_meaning})
			}
			}
		
			var columns = [{
				display: '被执行人名称',
		        name: 'executor_name',
		        resizable: false,
		        width: 21,
		        minWidth: 250,
		        editor: { 
					type: 'text', // 该列为可编辑状态
					maxlength:50 
				    }
		       
		    }, {
	            display: '执行状态',
	            name: 'execute_status',
	            resizable: false,
	            width: 80,
	            minWidth: 80,
	            editor: { 
					type: 'select', // 该列为可编辑状态
					data: departmentList, 
					valueField: 'execute_status', 
					textField: 'DepartmentName', 
					ext:{
						onChangeValue: function(value){ // 单元格内容发生变化时的触发事件
							
						}
					}   
				},
	    		render: function (rowdata, nowRowIndex, value, column) {
					return global_ligerui_extend.gridRenderSelectedValue(rowdata, nowRowIndex, value, column);
	   			}
	  
		    }, {
		    	 display: '立案时间',
	             name: 'accreditation_date',
	             type: 'date', //日期类型必备
	             format: "yyyy-MM-dd",//日期类型必备
	             resizable: false,
	             width: 21,
	             minWidth: 250,
	             editor: { 
						type: 'date', // 该列为日期类型
	             	}   
		    }, {
		        display: '执行标的',
		        name: 'execute_target',
		        resizable: false,
		        width: 21,
		        minWidth: 250,
		        editor: { 
					type: 'text', // 该列为可编辑状态
					maxlength:50 
				    }
		        
		    }];
			
		    grid_state = $("#grid-state").ligerGrid({
				columns: columns,
				rownumbers: true,
				data:grid_state_data,
				allowUnSelectRow: false,
				width: '100%',
		        height: 180,
		        heightDiff: -4,
				usePager: false,
				enabledEdit: true
		    });
		}

	//------------------------------------------------------------------------------------法院网案件执行状态结束------------------------------------------------------------------
	//------------------------------------------------------------------------------------处理所有文件上传的方法------------------------------------------------------------------
	var dialog_att;
	/*
	打开附件上传页面
	*/
	function openAddAttDialog(data_type_name,data_detail_name){
		var url = globalUtil.getHtml("../creditManage/addFileForCre.html?data_type_name="+data_type_name+"&data_detail_name="+data_detail_name);
		dialog_att = $.ligerDialog.open({
	        url: url,
	        title: '上传附件',
	        width: 650,
	        height: globalUtil.setDialogHeight(250),
	        onHiddenOrClose: function(){
	        	//alert('关闭或隐藏都调用的事件!');
	    	},
	        isResize: false
		});
	}
	//添加上传文件之后显示文件
	function addAttFile(newfileArr,objid){
		if(objid=="showOthersImage2"){//通话记录附件
			 fileArrTelPhone =  fileArrTelPhone.concat(newfileArr);
		}else if(objid=="showOthersImage3"){//公积金附件
			fileArrReserve =  fileArrReserve.concat(newfileArr);
		}else if(objid=="showOthersImage4"){//医保附件
			fileArrMedicare =  fileArrMedicare.concat(newfileArr);
		}
		var filehtml = $("#"+objid).html();
		for(var i=0;i<newfileArr.length;i++){
			var nnme=newfileArr[i].attachment_new_name.replace('/','thxg1');
			nnme=nnme.replace('/','thxg2');
			filehtml += '<div id="delUploadDivId'+nnme+'">';
			filehtml += '<a  target="_blank"  href="'+global_param.upload_file_url+newfileArr[i].attachment_address+'">'+newfileArr[i].attachment_old_name+'</a>';
			filehtml += '<img src="../../images/icon/icon-close.gif" onclick="deleteFile(\''+nnme+'\')"/>';
			filehtml += '</div>'
		}
		$("#"+objid).html(filehtml);
	}

    //获取上传附件内容，并且只能查看功能
	function init_attr(){
		$.getJSON(globalUtil.getTimestampUrl('/loancheck/getfilelist.do?wms_cre_credit_head_id='+wms_cre_credit_head_id),
				{},
				function(jsonArr) {
					var filehtml = $("#fileinfo").html();
					for(var i=0;i<jsonArr.length;i++){
						var nnme=jsonArr[i].attachment_new_name.replace('/','thxg1');
						nnme=nnme.replace('/','thxg2');
						filehtml += '<div id="delUploadDivId'+nnme+'">';
						filehtml += '<a  target="_blank"  href="#">'+jsonArr[i].attachment_old_name+'</a>';
						filehtml += '</div>'
					}
					$("#fileinfo").html(filehtml);
				});	    
	}
	//删除文件
	function deleteFile(filename){
       	$.ligerDialog.confirm(globalErrorMsg['100016'],
        function(yes) {
        	if (yes) {
        		$("#delUploadDivId"+filename).remove();
        		filename=filename.replace('thxg1','/');
        		filename=filename.replace('thxg2','/');
        		for(var i=0;i<fileArr.length;i++){
        			if(filename == fileArr[i].attachment_new_name){
        				fileArr.splice(i,1);
        				break;
        			}
        		}
	    	}                                            
   		});
    }
    
    //************************************保存数据函数开始******************************************/
    //---------------------------------------------------实现企业基本信息的和投资人的动态加载--------------------------------------------       
    var baidiv=1;
    var bainame=1;
    //新增Div
    function addBaiDiv(gridbasicbusiness){
		//获取节点div id的
		var centerDiv =document.getElementById(gridbasicbusiness);
		var createDiv =document.createElement("div");//创建div
		createDiv.id="gridbasicbusiness"+baidiv;//为新增的div添加id
		createDiv.innerHTML=
		"<div id='"+createDiv.id+"' name='gridbasicbusiness' class='center-txt2' style='margin-bottom: 15px; height: 460px; padding-top:10px;'>"
		+
		 "<div class='float-l'><div class='pop-form-title'>企业名称：</div><div class='pop-form-item'><input type='text' id='company_name' style='width: 325px;'maxlength='50' /></div></div>"
		 +
        "<div class='float-l'><div class='pop-form-title'>法人：</div><div class='pop-form-item'><input type='text' id='legal_person' style='width: 100px;' maxlength='50' /></div></div>"
        +
        "<div class='float-l clearboth'><div class='pop-form-title'>企业类型：</div><div class='pop-form-item'><input type='text' id='company_type' style='width: 100px;' maxlength='25' /></div></div>"
        +
        "<div class='float-l'><div class='pop-form-title'>成立日期：</div><div class='pop-form-item'><input id='found_date' class='Wdate' type='text' onclick=\"WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:true})\"  style='vertical-align: top; width: 100px;' />"
        +
        "</div></div>"
        +
        "<div class='float-l'><div class='pop-form-title'>注册日期：</div><div class='pop-form-item'><input id='register_date' class='Wdate' type='text' onclick=\"WdatePicker({dateFmt:'yyyy-MM-dd',isShowClear:true})\"  style='vertical-align: top; width: 100px;' />"
        +
        "</div></div>"
        +
        "<div class='float-l  clearboth'><div class='pop-form-title'>注册号：</div><div class='pop-form-item'><input type='text' id='register_no' style='width: 325px;'maxlength='25' /></div></div>"
        +
        "<div class='float-l'><div class='pop-form-title'>营业期限：</div><div class='pop-form-item'><input type='text' id='business_limit_date' style='width: 100px;' maxlength='25' /></div></div>"
        +
        "<div class='float-l clearboth'><div class='pop-form-title'>注册地址：</div><div class='pop-form-item'><input type='text' id='register_address' style='width: 325px;'maxlength='250' /></div></div>"
        +
        "<div class='float-l'><div class='pop-form-title'>注册资金：</div><div class='pop-form-item'><input type='text' id='register_money' style='width: 100px;'maxlength='13' maxVal='1000000000000' minVal='0' isPositiveInteger='1' /></div></div>"
		+
        "<div class='float-l clearboth'><div class='pop-form-title'>年检年度：</div><div class='pop-form-item'><input type='text' id='year_check' style='width: 100px;'maxlength='10' /></div></div>"
		+
        "<div class='float-l'><div class='pop-form-title'>组织机构代码：</div><div class='pop-form-item'><input type='text' id='org_code_no' style='width: 100px;'maxlength='100' /></div></div>"
	    +
        "<div class='float-l'><div class='pop-form-title'>纳税类型：</div><div class='pop-form-item'><input type='text' id='pay_taxes_type' style='width: 100px;'maxlength='25' /></div></div>"
        +
        "<div class='float-l clearboth'><div class='pop-form-title'>纳税状态：</div><div class='pop-form-item'><input type='text' id='pay_taxes_status' style='width: 100px;'maxlength='25' /></div></div>"
		+
        "<div class='float-l'><div class='pop-form-title'>税务登记号：</div><div class='pop-form-item'><input type='text' id='tax_register_no' style='width: 100px;'maxlength='100' /></div></div>"
		+
        "<div class='float-l'><div class='pop-form-title'>企业等级：</div><div class='pop-form-item'><input type='hidden' id='enter_level"+baidiv+"'/>"
		+
        "<p onmousedown='rate(this,event,"+baidiv+")'>"
        +
        "           <img src='../../images/icon_star_1.png' >"
        +
        "          <img src='../../images/icon_star_1.png' >"
        +
        "          <img src='../../images/icon_star_1.png' >"
        +
        "          <img src='../../images/icon_star_1.png' >"
        +
        "          <img src='../../images/icon_star_1.png' >"
        +
        "          </p></div></div>"
        +
	   "<div class='float-l clearboth' style='height: 10px;'></div><div class='center-content clearboth' style='min-width: 550px;'><div class='center-title'>投资人信息</div><div class='center-txt' style='margin-bottom: 5px;'><div  id='toolbar-top"+baidiv+"' class='minwidth400'></div><div id='grid-top"+baidiv+"'  name='my_top_grid' ></div></div></div>"
	    +
	   "<div align='right'  style='margin-bottom: 10px' ><a href='#' style='color: red; text-decoration: none;' onclick='deleteBaiDiv(this)' >删除本条企业基本信息</a></div></div>"	;
			
        document.getElementById("parentpoint").appendChild(createDiv);//为其在父类里面追加 
        //初始化新增的投资列表
        initGrid_t(baidiv);
		baidiv++;
		bainame++;
    }
    //初始化新增的投资列表
    function initGrid_t(grid_id){
    	//企业基本信息-投资工具条
    	$("#toolbar-top"+grid_id).ligerToolBar({
    	    items: [{
    	        text: '新增',
    	        click: add_top_grid,
    	        id:grid_id,
    	        icon: 'add'
    	    },{
    	            line: true
    	    },{
                text: '删除',
                click: delete_top_grid,
                id:grid_id,
                icon: 'delete'
    			},{
                      line: true
              }]
    	});
    	
    	var columns = [{
			display: '投资人类型',
	        name: 'investor_type',
	        resizable: false,
	        width: 21,
	        minWidth: 80,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:10
			    }
	       
	    }, {
	        display: '投资人',
	        name: 'investor',
	        resizable: false,
	        width: 21,
	        minWidth: 80,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:50 
			    }
	    
	    }, {
	        display: '认缴出资额',
	        name: 'rfjc_money',
	        resizable: false,
	        width: 21,
	        minWidth: 120,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:25
			    }
	       
	    }, {
	        display: '出资方式',
	        name: 'funding_way',
	        resizable: false,
	        width: 21,
	        minWidth: 100,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:25
			    }
	        
	    },{
	        display: '出资时间',
		    name: 'funding_date',
	        type: 'date', //日期类型必备
	        format: "yyyy-MM-dd",//日期类型必备
	        resizable: false,
	        width: 21,
	        minWidth: 120,
	        editor: { 
					type: 'date', // 该列为日期类型
	        	}   	       
	    },{
	        display: '实缴出资额',
	        name: 'real_funding_money',
	        resizable: false,
	        width: 21,
	        minWidth: 120,
	        editor: { 
				type: 'text', // 该列为可编辑状态
				maxlength:25 
			    }
	        },{
		        display: '出资方式',
		        name: 'real_funding_way',
		        resizable: false,
		        width: 21,
		        minWidth: 100,
		        editor: { 
					type: 'text', // 该列为可编辑状态
					maxlength:25
				    }
		        
		    },{
		        display: '出资时间',
			    name: 'real_funding_date',
		        type: 'date', //日期类型必备
		        format: "yyyy-MM-dd",//日期类型必备
		        resizable: false,
		        width: 21,
		        minWidth: 120,
		        editor: { 
						type: 'date', // 该列为日期类型
		        	}   	       
		    }];
    	
    	var  grid_top_data_tmp = {};
    	grid_top_data_tmp.Rows = [
    			               {"investor_type": "","investor": "","rfjc_money": "","funding_way": "","funding_date":"","real_funding_money":"","real_funding_way":"","real_funding_date":""},
    			               {"investor_type": "","investor": "","rfjc_money": "","funding_way": "","funding_date":"","real_funding_money":"","real_funding_way":"","real_funding_date":""},
    			               {"investor_type": "","investor": "","rfjc_money": "","funding_way": "","funding_date":"","real_funding_money":"","real_funding_way":"","real_funding_date":""}
    	];
		
	    var grid_top_1 = $("#grid-top"+grid_id).ligerGrid({
			columns: columns,
			rownumbers: true,
			data:grid_top_data_tmp,
			allowUnSelectRow: false,
			width: '100%',
	        height: 150,
	        heightDiff: -4,
			usePager: false,
			enabledEdit: true
	    });
    }
    //为新增加的企业信息 删除新的投资人 根据不同id
    function delete_top_grid() {
    	var addid = this.id;
    	var manager = $("#grid-top"+addid).ligerGetGridManager();
        var row = manager.getSelectedRow();
        if (!row) {
            globalUtil.warnMsg(globalErrorMsg['100001']); 
            return;
        }
        
        globalUtil.confirmMsg(globalErrorMsg['100016'],
        function(yes) { 
        	if(yes){
        		global_ligerui_extend.deleteSelectedRow(manager);
        	}
        });
    }
    //为新增加的企业信息 增加新的投资人 根据不同id
    function add_top_grid() {
       	var addid = this.id;
       	var rows = {
               "investor_type": "",
               "investor": "",
               "rfjc_money": "",
               "funding_way": "",
               "funding_date": "",
               "real_funding_money": "",
               "real_funding_way": "",
	           "real_funding_date": ""
           };
       	var manager = $("#grid-top"+addid).ligerGetGridManager();   
    	manager.addRow(rows);
       } 
    
    //删除Div
    function deleteBaiDiv(obj){
        //获取增加div块id的值
        var id = $(obj).parent().parent().attr('id');
        if(id.length=="gridbasicbusiness".length){
        	globalUtil.warnMsg(globalErrorMsg['400422']);//默认的第一条企业基本信息不能删除
        }else{
        	globalUtil.warnMsg(globalErrorMsg['400423']);//您确认删除所选企业信息记录？
        	 //判断本id对应的值并删除  
       		 var my = document.getElementById(id);  
       		 if (my != null){  
         	 my.parentNode.removeChild(my);
        	}          	
        }
    }
    
    //--------------------------------------------------------------------------------------------点击提交后跳转到 审批页面
    function sp(){
		clearLigerTip("ctinfo");//清理客户信息LigerTip控件
		clearLigerTip("bainfo");//清理企业基本信息LigerTip控件
	
		//当在客户信息页面时，检查此部分表单的数据
		if($('#ctinfo').css('display')!='none' && (globalVali.checkForm("ctinfo",false) || globalVali.checkForm("bainfo",false))){
			clearLigerTip("bainfo");
			if(!globalVali.checkForm("ctinfo",false)){
				globalUtil.warnMsg(globalErrorMsg['100115']);//资料填写有误
			}
		return;
		}
		//当在企业信息页面时，检查此部分表单的数据
		if($('#bainfo').css('display')!='none' && (globalVali.checkForm("bainfo",false) || globalVali.checkForm("ctinfo",false))){
			clearLigerTip("ctinfo");
		
			if(!globalVali.checkForm("bainfo",false)){
				globalUtil.warnMsg(globalErrorMsg['100115']);//资料填写有误
			}
			return;
		}
		//当在法院网案件执行状态页面时，检查此部分表单的数据
		if($('#csinfo').css('display')!='none'){
			clearLigerTip("ctinfo");
			clearLigerTip("bainfo");
		}
		
    	var url = globalUtil.getHtml("../creditManage/spapprove.html?wms_cre_credit_head_id="+wms_cre_credit_head_id);
   	    dialog=$.ligerDialog.open({
						url:url,
						title: '审批',
	        			width: 1000,
	        			height: globalUtil.setDialogHeight(500),
	        			onHiddenOrClose: function(){
	    		},
	        isResize: false
			}); 
		}
   //保存paramJson:wms_cre_credit_head_id,pass,advice.
    function save(approveWorkFlowVO){
    	var paramCtinfo = globalUtil.getFormParam("ctinfo");//获取客户信息
    	//-----------------获取通话记录信息
    	var paramTelinfo=JSON.stringify(getGridData(grid_telphone_conut));
    	paramCtinfo.paramTelinfo=paramTelinfo;
    	//通话记录附件上传信息
    	paramCtinfo.fileArrTelPhone=JSON.stringify(fileArrTelPhone);
    	
    	//------------------获取医保记录信息
    	var paramMedicareinfo=JSON.stringify(getGridData(grid_medicare));
    	paramCtinfo.paramMedicareinfo=paramMedicareinfo;
    	//医保附件上传信息
    	paramCtinfo.fileArrMedicare=JSON.stringify(fileArrMedicare);
        
    	//-----------------获取公积金记录信息
        var paramReserveinfo=JSON.stringify(getGridData(grid_reserve));
        paramCtinfo.paramReserveinfo=paramReserveinfo;
        //公积金附件上传信息
    	paramCtinfo.fileArrReserve=JSON.stringify(fileArrReserve);
    	
        //-----------------获取企业基本情况
         getBainfoAndDetailList();
         paramCtinfo.bainfoAndDetaiList=JSON.stringify(bainfoAndDetaiList);
		//法院网案件执行状态
		var paramCsinfo = JSON.stringify(getGridData(grid_state));
		paramCtinfo.paramCsinfo=paramCsinfo;
		
		paramCtinfo.taskId=taskId;
		
		paramCtinfo.pass=approveWorkFlowVO.pass;
		
		paramCtinfo.advice=approveWorkFlowVO.advice;
		
		paramCtinfo.wms_cre_credit_head_id=approveWorkFlowVO.wms_cre_credit_head_id;
		//wms_cre_credit_line_customer_change_head_id
		var telsId=[];
		for(var i=0;i<grid_telphone_count_data.Rows.length;i++){
			telsId.push(grid_telphone_count_data.Rows[i].wms_cre_credit_line_customer_change_head_id);
		}
		
		paramCtinfo.telsId=JSON.stringify(telsId);
		
		$.post(globalUtil.getTimestampUrl("/loancheck/wmscrecreditlinecustomerinfosave.do"), paramCtinfo,
			function(data) {
        		if (data === 'success') {
            	 	globalUtil.successMsg(globalErrorMsg['100002'],
            				 function(){            		 		
                			refreshAndClosePage();
            	 	});//保存成功
            	 
           		 }else {
                	globalUtil.errorMsg(globalErrorMsg['100012']); //保存失败
            	}
        }); 
    }
	
	//清理指定DIV下的所有LigerTip控件
	function clearLigerTip(divId){
		var elementArr = $("#"+divId+" *");
		jQuery.each(elementArr.get(), function(i, element) {
			$(element).ligerHideTip();
		});
	}
	//-----------------------------------------------------------------*实现页面添加多个填写企业基本情况信息和投资人信息的获取*---------------------------------------------------
	function getBainfoAndDetailList(){
	        //获取企业基本信息默认第一个输入框中的填写信息和投资人信息
	        var gridbasicbusinessV=globalUtil.getFormParam("gridbasicbusiness");
			gridbasicbusinessV.enter_level=$("#enter_level").val();
			gridbasicbusinessV.detaiListStr=JSON.stringify(getGrid(grid_top));
			bainfoAndDetaiList.push(gridbasicbusinessV);
		    var length=$('#parentpoint >div').length-1;
		    //获取新增后投资人Grid的Name对象从而可以获取对应的id
		    var my_top_grid=document.getElementsByName("my_top_grid");
		    var gridbasicbusiness_objs=document.getElementsByName("gridbasicbusiness");
		    //获取my_top_grid对象长度就知道新增了多少个div
			for(var i=0;i<my_top_grid.length;i++){
				    var gridbasicbusiness=globalUtil.getFormParam(gridbasicbusiness_objs[i].id);
				    gridbasicbusiness.enter_level=$('#enter_level'+(i+1)).val();
				    var manager=$('#'+my_top_grid[i].id).ligerGetGridManager();
				    var detaiListStr=JSON.stringify(getGridData(manager));
				    gridbasicbusiness.detaiListStr=detaiListStr;
				    bainfoAndDetaiList.push(gridbasicbusiness);
		      }
	}
   //-------------------------------------------------------------------保存数据函数结束-------------------------------------------------------------------------
 		//关闭本页并刷新查询页面
    	function refreshAndClosePage(){   
    		window.parent.location.reload();
    		closePage();
    	}
 		//关闭页面
    	function closePage(){
    		window.parent.dialog.hide();
    	}
        /**
    	*关闭窗口
    	*/
        function closeDialog() {
    		window.parent.dialog.hide();
        }
   //-------------------------------------------------------------------去掉空数据 并格式化日期-------------------------------------------------------------------
    	//获取表格数据，去除全部为空的记录
   		 function getGridData(grid){
    		grid.endEdit();
        	var data_all = grid.getData();
        	var griddata = [];
        	for(var i=0;i<data_all.length;i++){
        		var data = data_all[i];
        		var isEmpty = true;
        		if(data){
					for(var key in data){
						if($.trim(key) == '' || $.trim(key) == '__status' ||  $.trim(key) == 'execute_status'){continue;}
						if(!globalUtil.isEmpty(data[key])){
							if(data[key] instanceof Date){
								data[key]= data[key].format('yyyy-MM-dd');//格式化日期类型数据
							}
						isEmpty = false;
						}
					}
				}
				if(!isEmpty){
					griddata.push(data);
				}else{
					if(data['execute_status'] != '-1'){
						griddata.push(data);
					}
				}
        	}
        	return griddata;
   		 }
   		 /**
    		获取表格数据，去除全部为空的记录
   		*/
		function getGrid(grid){
			grid.endEdit();
	 		var data_all = grid.getData();
	 		var griddata = [];
	 		for(var i=0;i<data_all.length;i++){
	 			var data = data_all[i];
	 			var isEmpty = true;
	 			if(data){
					for(var key in data){
						if($.trim(key) == '' || $.trim(key) == '__status'){continue;}
						if(!globalUtil.isEmpty(data[key])){
							if(data[key] instanceof Date){
								data[key]= data[key].format('yyyy-MM-dd');//格式化日期类型数据
							}
							isEmpty = false;
						}
					}
				}
				if(!isEmpty){
					griddata.push(data);
				}
	 		}
	 		return griddata;
		}
     /*****************************************************实现等级小星星************************************/
		function rate(obj, oEvent,baidiv) {
			var imgSrc = '../../images/icon_star_1.png';
			var imgSrc_2 = '../../images/icon_star_2.png';
			if (obj.rateFlag) {
				return;
			}
			var e = oEvent || window.event;
			var target = e.target || e.srcElement;
			var imgArray = obj.getElementsByTagName("img");
			for (var i = 0; i < imgArray.length; i++) {
				imgArray[i]._num = i;
				imgArray[i].onclick = function() {
					if (obj.rateFlag) {
						return;
					}
					var inputid = this.parentNode.previousSibling;
					inputid.value = this._num + 1;
					document.getElementById("enter_level"+baidiv).value=inputid.value;
				}
			}
			if (target.tagName == "IMG") {
				for (var j = 0; j < imgArray.length; j++) {
					if (j <= target._num) {
						imgArray[j].src = imgSrc_2;
					} else {
						imgArray[j].src = imgSrc;
					}
					target.parentNode.click = function() {
						var imgnum = parseInt(target.parentNode.previousSibling.value);
						for (n = 0; n < imgArray.length; n++) {
							imgArray[n].src = imgSrc;
						}
						for (n = 0; n < imgnum; n++) {
							imgArray[n].src = imgSrc_2;
						}
					}
				}
			} else {
				return false;
			}
		}
	/***************************************************时间函数****************************************/
	//页面切换
	function changeTab(id) {
		var ctinfo = document.getElementById("ctinfo"); //客户资料tab
		var bainfo = document.getElementById("bainfo"); //企业基本情况tab
		var csinfo = document.getElementById("csinfo"); //法院网案件执行状态tab

		if (id == 'ctinfo') {
			document.getElementById("tabbody1").className = "tabbody1";
			document.getElementById("tabbody2").className = "tabbody2";
			document.getElementById("tabbody3").className = "tabbody2";
			ctinfo.style.display = '';
			bainfo.style.display = 'none';
			csinfo.style.display = 'none';
			clearLigerTip("bainfo");
			globalVali.checkForm("ctinfo", false);
		} else if (id == 'bainfo') {
			document.getElementById("tabbody1").className = "tabbody2";
			document.getElementById("tabbody2").className = "tabbody1";
			document.getElementById("tabbody3").className = "tabbody2";
			ctinfo.style.display = 'none';
			bainfo.style.display = '';
			csinfo.style.display = 'none';
			clearLigerTip("ctinfo");
			globalVali.checkForm("bainfo", false);
		} else if (id == 'csinfo') {
			document.getElementById("tabbody1").className = "tabbody2";
			document.getElementById("tabbody2").className = "tabbody2";
			document.getElementById("tabbody3").className = "tabbody1";
			ctinfo.style.display = 'none';
			bainfo.style.display = 'none';
			csinfo.style.display = '';
			clearLigerTip("bainfo");
			clearLigerTip("ctinfo");
			globalVali.checkForm("bainfo", false);
			globalVali.checkForm("ctinfo", false);
		}
	}
	///////////////////////////////////////////******************************************************************//////////////////
	function onmyinput(o) {
		if (o.value.length >= o.getAttribute("maxlength")) {
			if (o.value.length > o.getAttribute("maxlength"))
				o.value = o.value.substring(0, o.getAttribute("maxlength"));
			return false;
		}
		return true;
	}
	function mygetclipdata() {
		if (!document.all) {
			netscape.security.PrivilegeManager
					.enablePrivilege('UniversalXPConnect');
			var clip = Components.classes['@mozilla.org/widget/clipboard;1']
					.createInstance(Components.interfaces.nsIClipboard);
			var trans = Components.classes['@mozilla.org/widget/transferable;1']
					.createInstance(Components.interfaces.nsITransferable);
			trans.addDataFlavor('text/unicode');
			var str = Components.classes["@mozilla.org/supports-string;1"]
					.createInstance(Components.interfaces.nsISupportsString);
			clip.getData(trans, clip.kGlobalClipboard);
			var str = new Object();
			var strLength = new Object();
			trans.getTransferData("text/unicode", str, strLength);
			if (str)
				str = str.value
						.QueryInterface(Components.interfaces.nsISupportsString);
			var pastetext;
			if (str)
				pastetext = str.data.substring(0, strLength.value / 2);
			return pastetext;
		} else {
			return window.clipboardData.getData("Text");
		}
	}
	function mysetclipdata(o) {
		if (!document.all) {
			netscape.security.PrivilegeManager
					.enablePrivilege('UniversalXPConnect');
			var clip = Components.classes['@mozilla.org/widget/clipboard;1']
					.createInstance(Components.interfaces.nsIClipboard);
			var trans = Components.classes['@mozilla.org/widget/transferable;1']
					.createInstance(Components.interfaces.nsITransferable);
			trans.addDataFlavor("text/unicode");
			var str = Components.classes["@mozilla.org/supports-string;1"]
					.createInstance(Components.interfaces.nsISupportsString);
			str.data = o;
			trans.setTransferData("text/unicode", str, o.length * 2);
			var clipid = Components.interfaces.nsIClipboard;
			clip.setData(trans, null, clipid.kGlobalClipboard);
		} else {
			window.clipboardData.setData("Text", o);
		}
	}
	function onmypaste(o) {
		var nMaxLen = o.getAttribute ? parseInt(o.getAttribute("maxlength"))
				: "";
		if (!document.all) {
			//alert("输入的字符大于250个，超出了限制！！");
			globalUtil.errorMsg("输入的字符超出了限制！！"); //提示x
		} else {

			if (document.selection.createRange().text.length > 0) {
				var ovalueandclipboarddata = o.value
						+ window.clipboardData.getData("Text");
				if (o.getAttribute
						&& ovalueandclipboarddata.length
								- document.selection.createRange().text.length > nMaxLen) {
					if (window.clipboardData.getData("Text").substring(
							0,
							document.selection.createRange().text.length
									+ nMaxLen - o.value.length) != "")
						window.clipboardData
								.setData(
										"Text",
										window.clipboardData
												.getData("Text")
												.substring(
														0,
														document.selection
																.createRange().text.length
																+ nMaxLen
																- o.value.length));
					else
						return false;
				}
			} else {
				var ovalueandclipboarddata = o.value
						+ window.clipboardData.getData("Text");
				if (o.getAttribute && ovalueandclipboarddata.length > nMaxLen) {
					if (ovalueandclipboarddata.substring(0, nMaxLen
							- o.value.length) != "")
						window.clipboardData.setData("Text",
								ovalueandclipboarddata.substring(0, nMaxLen
										- o.value.length));
					else
						return false;
				}
			}
			return true;
		}
	}
	function onmykeypress(o) {
		if (!document.all) {
			var nMaxLen = o.getAttribute ? parseInt(o.getAttribute("maxlength"))
					: "";
			if (onmykeypress.caller.arguments[0].ctrlKey == true) {
				if (onmykeypress.caller.arguments[0].which == 118) {

					if (o.selectionStart < o.selectionEnd) {
						var ovalueandclipboarddata = o.value + mygetclipdata();
						if (o.getAttribute
								&& (ovalueandclipboarddata.length
										- o.selectionEnd + o.selectionStart > nMaxLen)) {
							if (mygetclipdata().substring(
									0,
									o.selectionEnd - o.selectionStart + nMaxLen
											- o.value.length) != "")
								mysetclipdata(mygetclipdata().substring(
										0,
										o.selectionEnd - o.selectionStart
												+ nMaxLen - o.value.length));
							else
								return false;
						}
					} else {
						var ovalueandclipboarddata = o.value + mygetclipdata();
						if (o.getAttribute
								&& ovalueandclipboarddata.length > nMaxLen) {
							if (ovalueandclipboarddata.substring(0, nMaxLen
									- o.value.length) != "")
								mysetclipdata(ovalueandclipboarddata.substring(
										0, nMaxLen - o.value.length));
							else
								return false;
						}
					}
					return true;

				}
			}

			if (onmykeypress.caller.arguments[0].which == 0
					|| onmykeypress.caller.arguments[0].which == 8)
				return true;
			if (o.value.length >= o.getAttribute("maxlength")) {
				if (o.selectionStart < o.selectionEnd)
					return true;
				if (o.value.length > o.getAttribute("maxlength"))
					o.value = o.value.substring(0, o.getAttribute("maxlength"));
				return false;
			} else
				return true;

		} else {
			if (document.selection.createRange().text.length > 0)
				return true;
			if (o.value.length >= o.getAttribute("maxlength"))
				return false;
			else
				return true;
		}
	}
</script>
</body>
</html>
