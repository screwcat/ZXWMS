<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace必须指向Dao接口 -->
<mapper namespace="com.zx.emanage.sysmanage.persist.PmPersonnelDao">
	<!-- get entity by pk -->
	<select id="get" parameterType="int" resultType="PmPersonnel">
		select
		personnel_id,
		personnel_encryptionid,
		personnel_code,
		personnel_shortcode,
		personnel_name,
		personnel_sex,
		personnel_age,
		date_format(personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		personnel_birthtime,
		personnel_identitycode,
		date_format(personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		personnel_identitytime,
		personnel_account,
		personnel_education,
		personnel_politicsstatus,
		personnel_marriage,
		personnel_nation,
		personnel_stature,
		personnel_weight,
		personnel_contacttel,
		personnel_corporationtel,
		personnel_extensiontel,
		personnel_emial,
		personnel_school,
		personnel_specialty,
		date_format(personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		personnel_entrancetime,
		date_format(personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		personnel_graduatetime,
		personnel_laborcontract,
		personnel_reinstated,
		personnel_confidential,
		personnel_pay,
		personnel_emergencyname,
		personnel_emergencyremark,
		personnel_accountaddress,
		personnel_emergencytel,
		personnel_othertel,
		personnel_regionnumber,
		personnel_organid,
		personnel_organcode,
		personnel_deptid,
		personnel_deptcode,
		personnel_deptname,
		personnel_team,
		personnel_postid,
		personnel_postname,
		personnel_postlevelid,
		date_format(personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		personnel_trialstarttime,
		date_format(personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		personnel_trialendtime,
		date_format(personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		personnel_traintime,
		personnel_trainremark,
		personnel_employmentform,
		date_format(personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		personnel_positivetime,
		personnel_bankname,
		personnel_bankcardcode,
		personnel_socialsecurity,
		personnel_socialinfo,
		date_format(personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		personnel_contractstarttime,
		date_format(personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		personnel_contractendtime,
		personnel_workage,
		personnel_seniority,
		personnel_state,
		personnel_remark,
		personnel_accounttype,
		enable_flag,
		create_user,
		date_format(create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		create_timestamp,
		last_update_user,
		date_format(last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		last_update_timestamp,
		leave_type,
		leave_time,
		date_format(leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		personnel_QQ,
		personnel_enter_state,
		flow1,
		flow2,
		flow3,
		flow4,
		flow5
		from
		pm_personnel
		where
		personnel_id = #{personnel_id}
		
	</select>

	<!-- count num -->
	<select id="findCount" parameterType="map" resultType="int">
		select count(personnel_id) as count
		from pm_personnel
		<where>
			<if test="paramname != null">
				<!-- and columnName = #{columnName} -->
			</if>
		</where>
	</select>

	<!-- list -->
	<select id="search" parameterType="map" resultType="java.util.HashMap">
		select
		personnel_id,
		personnel_encryptionid,
		personnel_code,
		personnel_shortcode,
		personnel_name,
		personnel_sex,
		personnel_age,
		date_format(personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		personnel_birthtime,
		personnel_identitycode,
		date_format(personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		personnel_identitytime,
		personnel_account,
		personnel_education,
		personnel_politicsstatus,
		personnel_marriage,
		personnel_nation,
		personnel_stature,
		personnel_weight,
		personnel_contacttel,
		personnel_corporationtel,
		personnel_extensiontel,
		personnel_emial,
		personnel_school,
		personnel_specialty,
		date_format(personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		personnel_entrancetime,
		date_format(personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		personnel_graduatetime,
		personnel_laborcontract,
		personnel_reinstated,
		personnel_confidential,
		personnel_pay,
		personnel_emergencyname,
		personnel_emergencyremark,
		personnel_accountaddress,
		personnel_emergencytel,
		personnel_othertel,
		personnel_regionnumber,
		personnel_organid,
		personnel_organcode,
		personnel_deptid,
		personnel_deptcode,
		personnel_deptname,
		personnel_team,
		personnel_postid,
		personnel_postname,
		personnel_postlevelid,
		date_format(personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		personnel_trialstarttime,
		date_format(personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		personnel_trialendtime,
		date_format(personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		personnel_traintime,
		personnel_trainremark,
		personnel_employmentform,
		date_format(personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		personnel_positivetime,
		personnel_bankname,
		personnel_bankcardcode,
		personnel_socialsecurity,
		personnel_socialinfo,
		date_format(personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		personnel_contractstarttime,
		date_format(personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		personnel_contractendtime,
		personnel_workage,
		personnel_seniority,
		personnel_state,
		personnel_remark,
		personnel_accounttype,
		enable_flag,
		create_user,
		date_format(create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		create_timestamp,
		last_update_user,
		date_format(last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		last_update_timestamp,
		leave_type,
		leave_time,
		date_format(leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		personnel_QQ,
		personnel_enter_state,
		flow1,
		flow2,
		flow3,
		flow4,
		flow5
		from pm_personnel
		<where>
			<if test="personnel_code != null">
				personnel_code =#{personnel_code}
			</if>
		</where>
		<if test="sortname != '' and sortorder !=''">
			ORDER BY ${sortname} ${sortorder}
		</if>
		<if test="offset != null and pagesize !=null">
			LIMIT ${offset} , ${pagesize}
		</if>
	</select>

	<!-- save -->
	<insert id="save" parameterType="PmPersonnel" useGeneratedKeys="true"
		keyProperty="personnel_id">
		INSERT INTO pm_personnel
		(
		personnel_id,

		personnel_encryptionid,

		personnel_code,

		personnel_shortcode,

		personnel_name,

		personnel_sex,

		personnel_age,

		personnel_birthtime,

		personnel_identitycode,

		personnel_identitytime,

		personnel_account,

		personnel_education,

		personnel_politicsstatus,

		personnel_marriage,

		personnel_nation,

		personnel_stature,

		personnel_weight,

		personnel_contacttel,

		personnel_corporationtel,

		personnel_extensiontel,

		personnel_emial,

		personnel_school,

		personnel_specialty,

		personnel_entrancetime,

		personnel_graduatetime,

		personnel_laborcontract,

		personnel_reinstated,

		personnel_confidential,

		personnel_pay,

		personnel_emergencyname,

		personnel_emergencyremark,

		personnel_accountaddress,

		personnel_emergencytel,

		personnel_othertel,

		personnel_regionnumber,

		personnel_organid,

		personnel_organcode,

		personnel_deptid,

		personnel_deptcode,

		personnel_deptname,

		personnel_team,

		personnel_postid,

		personnel_postname,

		personnel_postlevelid,

		personnel_trialstarttime,

		personnel_trialendtime,

		personnel_traintime,

		personnel_trainremark,

		personnel_employmentform,

		personnel_positivetime,

		personnel_bankname,

		personnel_bankcardcode,

		personnel_socialsecurity,

		personnel_socialinfo,

		personnel_contractstarttime,

		personnel_contractendtime,

		personnel_workage,

		personnel_seniority,

		personnel_state,

		personnel_remark,

		personnel_accounttype,

		enable_flag,

		create_user,

		create_timestamp,

		last_update_user,

		last_update_timestamp,

		leave_type,

		leave_time,

		personnel_QQ,

		personnel_enter_state,

		flow1,

		flow2,

		flow3,

		flow4,

		flow5
		)
		VALUES
		(
		#{personnel_id},
		#{personnel_encryptionid},
		#{personnel_code},
		#{personnel_shortcode},
		#{personnel_name},
		#{personnel_sex},
		#{personnel_age},
		#{personnel_birthtime},
		#{personnel_identitycode},
		#{personnel_identitytime},
		#{personnel_account},
		#{personnel_education},
		#{personnel_politicsstatus},
		#{personnel_marriage},
		#{personnel_nation},
		#{personnel_stature},
		#{personnel_weight},
		#{personnel_contacttel},
		#{personnel_corporationtel},
		#{personnel_extensiontel},
		#{personnel_emial},
		#{personnel_school},
		#{personnel_specialty},
		#{personnel_entrancetime},
		#{personnel_graduatetime},
		#{personnel_laborcontract},
		#{personnel_reinstated},
		#{personnel_confidential},
		#{personnel_pay},
		#{personnel_emergencyname},
		#{personnel_emergencyremark},
		#{personnel_accountaddress},
		#{personnel_emergencytel},
		#{personnel_othertel},
		#{personnel_regionnumber},
		#{personnel_organid},
		#{personnel_organcode},
		#{personnel_deptid},
		#{personnel_deptcode},
		#{personnel_deptname},
		#{personnel_team},
		#{personnel_postid},
		#{personnel_postname},
		#{personnel_postlevelid},
		#{personnel_trialstarttime},
		#{personnel_trialendtime},
		#{personnel_traintime},
		#{personnel_trainremark},
		#{personnel_employmentform},
		#{personnel_positivetime},
		#{personnel_bankname},
		#{personnel_bankcardcode},
		#{personnel_socialsecurity},
		#{personnel_socialinfo},
		#{personnel_contractstarttime},
		#{personnel_contractendtime},
		#{personnel_workage},
		#{personnel_seniority},
		#{personnel_state},
		#{personnel_remark},
		#{personnel_accounttype},
		#{enable_flag},
		#{create_user},
		#{create_timestamp},
		#{last_update_user},
		#{last_update_timestamp},
		#{leave_type},
		#{leave_time},
		#{personnel_QQ},
		#{personnel_enter_state},
		#{flow1},
		#{flow2},
		#{flow3},
		#{flow4},
		#{flow5}
		);
	</insert>

	<!-- 更新用户 -->
	<update id="update" parameterType="PmPersonnel">
		update pm_personnel
		<set>
			<if test="personnel_id != null">
				personnel_id = #{personnel_id},
			</if>
			<if test="personnel_encryptionid != null">
				personnel_encryptionid = #{personnel_encryptionid},
			</if>
			<if test="personnel_code != null">
				personnel_code = #{personnel_code},
			</if>
			<if test="personnel_shortcode != null">
				personnel_shortcode = #{personnel_shortcode},
			</if>
			<if test="personnel_name != null">
				personnel_name = #{personnel_name},
			</if>
			<if test="personnel_sex != null">
				personnel_sex = #{personnel_sex},
			</if>
			<if test="personnel_age != null">
				personnel_age = #{personnel_age},
			</if>
			<if test="personnel_birthtime != null">
				personnel_birthtime = #{personnel_birthtime},
			</if>
			<if test="personnel_identitycode != null">
				personnel_identitycode = #{personnel_identitycode},
			</if>
			<if test="personnel_identitytime != null">
				personnel_identitytime = #{personnel_identitytime},
			</if>
			<if test="personnel_account != null">
				personnel_account = #{personnel_account},
			</if>
			<if test="personnel_education != null">
				personnel_education = #{personnel_education},
			</if>
			<if test="personnel_politicsstatus != null">
				personnel_politicsstatus = #{personnel_politicsstatus},
			</if>
			<if test="personnel_marriage != null">
				personnel_marriage = #{personnel_marriage},
			</if>
			<if test="personnel_nation != null">
				personnel_nation = #{personnel_nation},
			</if>
			<if test="personnel_stature != null">
				personnel_stature = #{personnel_stature},
			</if>
			<if test="personnel_weight != null">
				personnel_weight = #{personnel_weight},
			</if>
			<if test="personnel_contacttel != null">
				personnel_contacttel = #{personnel_contacttel},
			</if>
			<if test="personnel_corporationtel != null">
				personnel_corporationtel = #{personnel_corporationtel},
			</if>
			<if test="personnel_extensiontel != null">
				personnel_extensiontel = #{personnel_extensiontel},
			</if>
			<if test="personnel_emial != null">
				personnel_emial = #{personnel_emial},
			</if>
			<if test="personnel_school != null">
				personnel_school = #{personnel_school},
			</if>
			<if test="personnel_specialty != null">
				personnel_specialty = #{personnel_specialty},
			</if>
			<if test="personnel_entrancetime != null">
				personnel_entrancetime = #{personnel_entrancetime},
			</if>
			<if test="personnel_graduatetime != null">
				personnel_graduatetime = #{personnel_graduatetime},
			</if>
			<if test="personnel_laborcontract != null">
				personnel_laborcontract = #{personnel_laborcontract},
			</if>
			<if test="personnel_reinstated != null">
				personnel_reinstated = #{personnel_reinstated},
			</if>
			<if test="personnel_confidential != null">
				personnel_confidential = #{personnel_confidential},
			</if>
			<if test="personnel_pay != null">
				personnel_pay = #{personnel_pay},
			</if>
			<if test="personnel_emergencyname != null">
				personnel_emergencyname = #{personnel_emergencyname},
			</if>
			<if test="personnel_emergencyremark != null">
				personnel_emergencyremark = #{personnel_emergencyremark},
			</if>
			<if test="personnel_accountaddress != null">
				personnel_accountaddress = #{personnel_accountaddress},
			</if>
			<if test="personnel_emergencytel != null">
				personnel_emergencytel = #{personnel_emergencytel},
			</if>
			<if test="personnel_othertel != null">
				personnel_othertel = #{personnel_othertel},
			</if>
			<if test="personnel_regionnumber != null">
				personnel_regionnumber = #{personnel_regionnumber},
			</if>
			<if test="personnel_organid != null">
				personnel_organid = #{personnel_organid},
			</if>
			<if test="personnel_organcode != null">
				personnel_organcode = #{personnel_organcode},
			</if>
			<if test="personnel_deptid != null">
				personnel_deptid = #{personnel_deptid},
			</if>
			<if test="personnel_deptcode != null">
				personnel_deptcode = #{personnel_deptcode},
			</if>
			<if test="personnel_deptname != null">
				personnel_deptname = #{personnel_deptname},
			</if>
			<if test="personnel_team != null">
				personnel_team = #{personnel_team},
			</if>
			<if test="personnel_postid != null">
				personnel_postid = #{personnel_postid},
			</if>
			<if test="personnel_postname != null">
				personnel_postname = #{personnel_postname},
			</if>
			<if test="personnel_postlevelid != null">
				personnel_postlevelid = #{personnel_postlevelid},
			</if>
			<if test="personnel_trialstarttime != null">
				personnel_trialstarttime = #{personnel_trialstarttime},
			</if>
			<if test="personnel_trialendtime != null">
				personnel_trialendtime = #{personnel_trialendtime},
			</if>
			<if test="personnel_traintime != null">
				personnel_traintime = #{personnel_traintime},
			</if>
			<if test="personnel_trainremark != null">
				personnel_trainremark = #{personnel_trainremark},
			</if>
			<if test="personnel_employmentform != null">
				personnel_employmentform = #{personnel_employmentform},
			</if>
			<if test="personnel_positivetime != null">
				personnel_positivetime = #{personnel_positivetime},
			</if>
			<if test="personnel_bankname != null">
				personnel_bankname = #{personnel_bankname},
			</if>
			<if test="personnel_bankcardcode != null">
				personnel_bankcardcode = #{personnel_bankcardcode},
			</if>
			<if test="personnel_socialsecurity != null">
				personnel_socialsecurity = #{personnel_socialsecurity},
			</if>
			<if test="personnel_socialinfo != null">
				personnel_socialinfo = #{personnel_socialinfo},
			</if>
			<if test="personnel_contractstarttime != null">
				personnel_contractstarttime = #{personnel_contractstarttime},
			</if>
			<if test="personnel_contractendtime != null">
				personnel_contractendtime = #{personnel_contractendtime},
			</if>
			<if test="personnel_workage != null">
				personnel_workage = #{personnel_workage},
			</if>
			<if test="personnel_seniority != null">
				personnel_seniority = #{personnel_seniority},
			</if>
			<if test="personnel_state != null">
				personnel_state = #{personnel_state},
			</if>
			<if test="personnel_remark != null">
				personnel_remark = #{personnel_remark},
			</if>
			<if test="personnel_accounttype != null">
				personnel_accounttype = #{personnel_accounttype},
			</if>
			<if test="enable_flag != null">
				enable_flag = #{enable_flag},
			</if>
			<if test="create_user != null">
				create_user = #{create_user},
			</if>
			<if test="create_timestamp != null">
				create_timestamp = #{create_timestamp},
			</if>
			<if test="last_update_user != null">
				last_update_user = #{last_update_user},
			</if>
			<if test="last_update_timestamp != null">
				last_update_timestamp = #{last_update_timestamp},
			</if>
			<if test="leave_type !=null">
				leave_type =#{leave_type},
			</if>
			<if test="leave_time !=null">
				leave_time =#{leave_time},
			</if>
			<if test="personnel_QQ !=null">
				personnel_QQ =#{personnel_QQ},
			</if>
			<if test="personnel_enter_state !=null">
				personnel_enter_state =#{personnel_enter_state},
			</if>
			<if test="flow1 != null">
				flow1 = #{flow1},
			</if>
			<if test="flow2 != null">
				flow2 = #{flow2},
			</if>
			<if test="flow3 != null">
				flow3 = #{flow3},
			</if>
			<if test="flow4 != null">
				flow4 = #{flow4},
			</if>
			<if test="flow5 != null">
				flow5 = #{flow5},
			</if>
		</set>
		where
		personnel_id = #{personnel_id}
	</update>
	<select id="getListByEntity" parameterType="PmPersonnel"
		resultType="PmPersonnel">
		select
		personnel_id,
		personnel_encryptionid,
		personnel_code,
		personnel_shortcode,
		personnel_name,
		personnel_sex,
		personnel_age,
		date_format(personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		personnel_birthtime,
		personnel_identitycode,
		date_format(personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		personnel_identitytime,
		personnel_account,
		personnel_education,
		personnel_politicsstatus,
		personnel_marriage,
		personnel_nation,
		personnel_stature,
		personnel_weight,
		personnel_contacttel,
		personnel_corporationtel,
		personnel_extensiontel,
		personnel_emial,
		personnel_school,
		personnel_specialty,
		date_format(personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		personnel_entrancetime,
		date_format(personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		personnel_graduatetime,
		personnel_laborcontract,
		personnel_reinstated,
		personnel_confidential,
		personnel_pay,
		personnel_emergencyname,
		personnel_emergencyremark,
		personnel_accountaddress,
		personnel_emergencytel,
		personnel_othertel,
		personnel_regionnumber,
		personnel_organid,
		personnel_organcode,
		personnel_deptid,
		personnel_deptcode,
		personnel_deptname,
		personnel_team,
		personnel_postid,
		personnel_postname,
		personnel_postlevelid,
		date_format(personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		personnel_trialstarttime,
		date_format(personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		personnel_trialendtime,
		date_format(personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		personnel_traintime,
		personnel_trainremark,
		personnel_employmentform,
		date_format(personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		personnel_positivetime,
		personnel_bankname,
		personnel_bankcardcode,
		personnel_socialsecurity,
		personnel_socialinfo,
		date_format(personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		personnel_contractstarttime,
		date_format(personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		personnel_contractendtime,
		personnel_workage,
		personnel_seniority,
		personnel_state,
		personnel_remark,
		personnel_accounttype,
		p.enable_flag,
		p.create_user,
		date_format(p.create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		p.create_timestamp,
		p.last_update_user,
		date_format(p.last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		p.last_update_timestamp,
		leave_type,
		leave_time,
		date_format(leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		personnel_QQ,
		personnel_enter_state,
		flow1,
		flow2,
		flow3,
		flow4,
		flow5,
		region_province_dict_id,
		region_city_dict_id
		from
		pm_personnel p
			left join 
		wms_inve_clerk_region  r
		on 
		region_number = personnel_regionNumber and r.enable_flag =1
		<where>
			<if test="personnel_id != null">
				and personnel_id = #{personnel_id}
			</if>
			<if test="personnel_encryptionid != null">
				and personnel_encryptionid = #{personnel_encryptionid}
			</if>
			<if test="personnel_code != null">
				and personnel_code = #{personnel_code}
			</if>
			<if test="personnel_shortcode != null">
				and personnel_shortcode = #{personnel_shortcode}
			</if>
			<if test="personnel_name != null">
				and personnel_name = #{personnel_name}
			</if>
			<if test="personnel_sex != null">
				and personnel_sex = #{personnel_sex}
			</if>
			<if test="personnel_age != null">
				and personnel_age = #{personnel_age}
			</if>
			<if test="personnel_birthtime != null">
				and personnel_birthtime = #{personnel_birthtime}
			</if>
			<if test="personnel_identitycode != null">
				and personnel_identitycode = #{personnel_identitycode}
			</if>
			<if test="personnel_identitytime != null">
				and personnel_identitytime = #{personnel_identitytime}
			</if>
			<if test="personnel_account != null">
				and personnel_account = #{personnel_account}
			</if>
			<if test="personnel_education != null">
				and personnel_education = #{personnel_education}
			</if>
			<if test="personnel_politicsstatus != null">
				and personnel_politicsstatus = #{personnel_politicsstatus}
			</if>
			<if test="personnel_marriage != null">
				and personnel_marriage = #{personnel_marriage}
			</if>
			<if test="personnel_nation != null">
				and personnel_nation = #{personnel_nation}
			</if>
			<if test="personnel_stature != null">
				and personnel_stature = #{personnel_stature}
			</if>
			<if test="personnel_weight != null">
				and personnel_weight = #{personnel_weight}
			</if>
			<if test="personnel_contacttel != null">
				and personnel_contacttel = #{personnel_contacttel}
			</if>
			<if test="personnel_corporationtel != null">
				and personnel_corporationtel = #{personnel_corporationtel}
			</if>
			<if test="personnel_extensiontel != null">
				and personnel_extensiontel = #{personnel_extensiontel}
			</if>
			<if test="personnel_emial != null">
				and personnel_emial = #{personnel_emial}
			</if>
			<if test="personnel_school != null">
				and personnel_school = #{personnel_school}
			</if>
			<if test="personnel_specialty != null">
				and personnel_specialty = #{personnel_specialty}
			</if>
			<if test="personnel_entrancetime != null">
				and personnel_entrancetime = #{personnel_entrancetime}
			</if>
			<if test="personnel_graduatetime != null">
				and personnel_graduatetime = #{personnel_graduatetime}
			</if>
			<if test="personnel_laborcontract != null">
				and personnel_laborcontract = #{personnel_laborcontract}
			</if>
			<if test="personnel_reinstated != null">
				and personnel_reinstated = #{personnel_reinstated}
			</if>
			<if test="personnel_confidential != null">
				and personnel_confidential = #{personnel_confidential}
			</if>
			<if test="personnel_pay != null">
				and personnel_pay = #{personnel_pay}
			</if>
			<if test="personnel_emergencyname != null">
				and personnel_emergencyname = #{personnel_emergencyname}
			</if>
			<if test="personnel_emergencyremark != null">
				and personnel_emergencyremark = #{personnel_emergencyremark}
			</if>
			<if test="personnel_accountaddress != null">
				and personnel_accountaddress = #{personnel_accountaddress}
			</if>
			<if test="personnel_emergencytel != null">
				and personnel_emergencytel = #{personnel_emergencytel}
			</if>
			<if test="personnel_othertel != null">
				and personnel_othertel = #{personnel_othertel}
			</if>
			<if test="personnel_regionnumber != null">
				and personnel_regionnumber = #{personnel_regionnumber}
			</if>
			<if test="personnel_organid != null">
				and personnel_organid = #{personnel_organid}
			</if>
			<if test="personnel_organcode != null">
				and personnel_organcode = #{personnel_organcode}
			</if>
			<if test="personnel_deptid != null">
				and personnel_deptid = #{personnel_deptid}
			</if>
			<if test="personnel_deptcode != null">
				and personnel_deptcode = #{personnel_deptcode}
			</if>
			<if test="personnel_deptname != null">
				and personnel_deptname = #{personnel_deptname}
			</if>
			<if test="personnel_team != null">
				and personnel_team = #{personnel_team}
			</if>
			<if test="personnel_postid != null">
				and personnel_postid = #{personnel_postid}
			</if>
			<if test="personnel_postname != null">
				and personnel_postname = #{personnel_postname}
			</if>
			<if test="personnel_postlevelid != null">
				and personnel_postlevelid = #{personnel_postlevelid}
			</if>
			<if test="personnel_trialstarttime != null">
				and personnel_trialstarttime = #{personnel_trialstarttime}
			</if>
			<if test="personnel_trialendtime != null">
				and personnel_trialendtime = #{personnel_trialendtime}
			</if>
			<if test="personnel_traintime != null">
				and personnel_traintime = #{personnel_traintime}
			</if>
			<if test="personnel_trainremark != null">
				and personnel_trainremark = #{personnel_trainremark}
			</if>
			<if test="personnel_employmentform != null">
				and personnel_employmentform = #{personnel_employmentform}
			</if>
			<if test="personnel_positivetime != null">
				and personnel_positivetime = #{personnel_positivetime}
			</if>
			<if test="personnel_bankname != null">
				and personnel_bankname = #{personnel_bankname}
			</if>
			<if test="personnel_bankcardcode != null">
				and personnel_bankcardcode = #{personnel_bankcardcode}
			</if>
			<if test="personnel_socialsecurity != null">
				and personnel_socialsecurity = #{personnel_socialsecurity}
			</if>
			<if test="personnel_socialinfo != null">
				and personnel_socialinfo = #{personnel_socialinfo}
			</if>
			<if test="personnel_contractstarttime != null">
				and personnel_contractstarttime = #{personnel_contractstarttime}
			</if>
			<if test="personnel_contractendtime != null">
				and personnel_contractendtime = #{personnel_contractendtime}
			</if>
			<if test="personnel_workage != null">
				and personnel_workage = #{personnel_workage}
			</if>
			<if test="personnel_seniority != null">
				and personnel_seniority = #{personnel_seniority}
			</if>
			<if test="personnel_state != null">
				and personnel_state = #{personnel_state}
			</if>
			<if test="personnel_remark != null">
				and personnel_remark = #{personnel_remark}
			</if>
			<if test="personnel_accounttype != null">
				and personnel_accounttype = #{personnel_accounttype}
			</if>
			<if test="enable_flag != null">
				and p.enable_flag = #{enable_flag}
			</if>
			<if test="create_user != null">
				and p.create_user = #{create_user}
			</if>
			<if test="create_timestamp != null">
				and p.create_timestamp = #{create_timestamp}
			</if>
			<if test="last_update_user != null">
				and p.last_update_user = #{last_update_user}
			</if>
			<if test="last_update_timestamp != null">
				and p.last_update_timestamp = #{last_update_timestamp}
			</if>
			<if test="leave_type !=null">
				leave_type =#{leave_type},
			</if>
			<if test="leave_time !=null">
				leave_time =#{leave_time},
			</if>
			<if test="personnel_QQ !=null">
				personnel_QQ =#{personnel_QQ},
			</if>
			<if test="personnel_enter_state !=null">
				personnel_enter_state =#{personnel_enter_state},
			</if>
			<if test="flow1 != null">
				and flow1 = #{flow1}
			</if>
			<if test="flow2 != null">
				and flow2 = #{flow2}
			</if>
			<if test="flow3 != null">
				and flow3 = #{flow3}
			</if>
			<if test="flow4 != null">
				and flow4 = #{flow4}
			</if>
			<if test="flow5 != null">
				and flow5 = #{flow5}
			</if>

		</where>
	</select>
	
	<select id="getListByEntity2" parameterType="PmPersonnel"
		resultType="java.util.Map">
			
			SELECT 
				pm.personnel_id,
				pm.personnel_encryptionid,
				pm.personnel_code,
				pm.personnel_shortcode,
				pm.personnel_name,
				pm.personnel_sex,
				pm.personnel_age,
				DATE_FORMAT(pm.personnel_birthtime,'%Y-%m-%d') AS personnel_birthtime_str,
				pm.personnel_birthtime,
				pm.personnel_identitycode,
				DATE_FORMAT(pm.personnel_identitytime,'%Y-%m-%d') AS personnel_identitytime_str,
				pm.personnel_identitytime,
				pm.personnel_account,
				pm.personnel_education,
				pm.personnel_politicsstatus,
				pm.personnel_marriage,
				pm.personnel_nation,
				pm.personnel_stature,
				pm.personnel_weight,
				pm.personnel_contacttel,
				pm.personnel_corporationtel,
				pm.personnel_extensiontel,
				pm.personnel_emial,
				pm.personnel_school,
				pm.personnel_specialty,
				DATE_FORMAT(pm.personnel_entrancetime,'%Y-%m-%d') AS personnel_entrancetime_str,
				pm.personnel_entrancetime,
				DATE_FORMAT(pm.personnel_graduatetime,'%Y-%m-%d') AS personnel_graduatetime_str,
				pm.personnel_graduatetime,
				pm.personnel_laborcontract,
				pm.personnel_reinstated,
				pm.personnel_confidential,
				pm.personnel_pay,
				pm.personnel_emergencyname,
				pm.personnel_emergencyremark,
				pm.personnel_accountaddress,
				pm.personnel_emergencytel,
				pm.personnel_othertel,
				pm.personnel_regionnumber,
				pm.personnel_organid,
				(SELECT getCompanyName(personnel_deptid)) AS personnel_organcode,
				pm.personnel_deptid,
				pm.personnel_deptcode,
				pm.personnel_deptname,
				pm.personnel_team,
				pm.personnel_postid,
				pm.personnel_postname,
				pm.personnel_postlevelid,
				DATE_FORMAT(pm.personnel_trialstarttime,'%Y-%m-%d') AS personnel_trialstarttime_str,
				pm.personnel_trialstarttime,
				DATE_FORMAT(pm.personnel_trialendtime,'%Y-%m-%d') AS personnel_trialendtime_str,
				pm.personnel_trialendtime,
				DATE_FORMAT(pm.personnel_traintime,'%Y-%m-%d') AS personnel_traintime_str,
				pm.personnel_traintime,
				pm.personnel_trainremark,
				pm.personnel_employmentform,
				DATE_FORMAT(pm.personnel_positivetime,'%Y-%m-%d') AS personnel_positivetime_str,
				pm.personnel_positivetime,
				pm.personnel_bankname,
				pm.personnel_bankcardcode,
				pm.personnel_socialsecurity,
				pm.personnel_socialinfo,
				DATE_FORMAT(pm.personnel_contractstarttime,'%Y-%m-%d') AS personnel_contractstarttime_str,
				pm.personnel_contractstarttime,
				DATE_FORMAT(pm.personnel_contractendtime,'%Y-%m-%d') AS personnel_contractendtime_str,
				pm.personnel_contractendtime,
				pm.personnel_workage,
				pm.personnel_seniority,
				pm.personnel_state,
				pm.personnel_remark,
				pm.personnel_accounttype,
				pm.enable_flag,
				pm.create_user,
				DATE_FORMAT(pm.create_timestamp,'%Y-%m-%d %H:%i:%s') AS create_timestamp_str,
				pm.create_timestamp,
				pm.last_update_user,
				DATE_FORMAT(pm.last_update_timestamp,'%Y-%m-%d %H:%i:%s') AS last_update_timestamp_str,
				pm.last_update_timestamp,
				pm.leave_type,
				pm.leave_time,
				DATE_FORMAT(pm.leave_time,'%Y-%m-%d %H:%i:%s') AS leave_time_str,
				pm.personnel_QQ,
				pm.personnel_enter_state,
				pm.flow1,
				pm.flow2,
				pm.flow3,
				pm.flow4,
				pm.flow5
			FROM 
				pm_personnel pm
				<where> 
					<if test="personnel_id != null">
						and pm.personnel_id = #{personnel_id}
					</if>
					<if test="personnel_encryptionid != null">
						and pm.personnel_encryptionid = #{personnel_encryptionid}
					</if>
					<if test="personnel_code != null">
						and pm.personnel_code = #{personnel_code}
					</if>
					<if test="personnel_shortcode != null">
						and pm.personnel_shortcode = #{personnel_shortcode}
					</if>
					<if test="personnel_name != null">
						and pm.personnel_name = #{personnel_name}
					</if>
					<if test="personnel_sex != null">
						and pm.personnel_sex = #{personnel_sex}
					</if>
					<if test="personnel_age != null">
						and pm.personnel_age = #{personnel_age}
					</if>
					<if test="personnel_birthtime != null">
						and pm.personnel_birthtime = #{personnel_birthtime}
					</if>
					<if test="personnel_identitycode != null">
						and pm.personnel_identitycode = #{personnel_identitycode}
					</if>
					<if test="personnel_identitytime != null">
						and pm.personnel_identitytime = #{personnel_identitytime}
					</if>
					<if test="personnel_account != null">
						and pm.personnel_account = #{personnel_account}
					</if>
					<if test="personnel_education != null">
						and pm.personnel_education = #{personnel_education}
					</if>
					<if test="personnel_politicsstatus != null">
						and pm.personnel_politicsstatus = #{personnel_politicsstatus}
					</if>
					<if test="personnel_marriage != null">
						and pm.personnel_marriage = #{personnel_marriage}
					</if>
					<if test="personnel_nation != null">
						and pm.personnel_nation = #{personnel_nation}
					</if>
					<if test="personnel_stature != null">
						and pm.personnel_stature = #{personnel_stature}
					</if>
					<if test="personnel_weight != null">
						and pm.personnel_weight = #{personnel_weight}
					</if>
					<if test="personnel_contacttel != null">
						and pm.personnel_contacttel = #{personnel_contacttel}
					</if>
					<if test="personnel_corporationtel != null">
						and pm.personnel_corporationtel = #{personnel_corporationtel}
					</if>
					<if test="personnel_extensiontel != null">
						and pm.personnel_extensiontel = #{personnel_extensiontel}
					</if>
					<if test="personnel_emial != null">
						and pm.personnel_emial = #{personnel_emial}
					</if>
					<if test="personnel_school != null">
						and pm.personnel_school = #{personnel_school}
					</if>
					<if test="personnel_specialty != null">
						and pm.personnel_specialty = #{personnel_specialty}
					</if>
					<if test="personnel_entrancetime != null">
						and pm.personnel_entrancetime = #{personnel_entrancetime}
					</if>
					<if test="personnel_graduatetime != null">
						and pm.personnel_graduatetime = #{personnel_graduatetime}
					</if>
					<if test="personnel_laborcontract != null">
						and pm.personnel_laborcontract = #{personnel_laborcontract}
					</if>
					<if test="personnel_reinstated != null">
						and pm.personnel_reinstated = #{personnel_reinstated}
					</if>
					<if test="personnel_confidential != null">
						and pm.personnel_confidential = #{personnel_confidential}
					</if>
					<if test="personnel_pay != null">
						and pm.personnel_pay = #{personnel_pay}
					</if>
					<if test="personnel_emergencyname != null">
						and pm.personnel_emergencyname = #{personnel_emergencyname}
					</if>
					<if test="personnel_emergencyremark != null">
						and pm.personnel_emergencyremark = #{personnel_emergencyremark}
					</if>
					<if test="personnel_accountaddress != null">
						and pm.personnel_accountaddress = #{personnel_accountaddress}
					</if>
					<if test="personnel_emergencytel != null">
						and pm.personnel_emergencytel = #{personnel_emergencytel}
					</if>
					<if test="personnel_othertel != null">
						and pm.personnel_othertel = #{personnel_othertel}
					</if>
					<if test="personnel_regionnumber != null">
						and pm.personnel_regionnumber = #{personnel_regionnumber}
					</if>
					<if test="personnel_organid != null">
						and pm.personnel_organid = #{personnel_organid}
					</if>
					<if test="personnel_organcode != null">
						and pm.personnel_organcode = #{personnel_organcode}
					</if>
					<if test="personnel_deptid != null">
						and pm.personnel_deptid = #{personnel_deptid}
					</if>
					<if test="personnel_deptcode != null">
						and pm.personnel_deptcode = #{personnel_deptcode}
					</if>
					<if test="personnel_deptname != null">
						and pm.personnel_deptname = #{personnel_deptname}
					</if>
					<if test="personnel_team != null">
						and pm.personnel_team = #{personnel_team}
					</if>
					<if test="personnel_postid != null">
						and pm.personnel_postid = #{personnel_postid}
					</if>
					<if test="personnel_postname != null">
						and pm.personnel_postname = #{personnel_postname}
					</if>
					<if test="personnel_postlevelid != null">
						and pm.personnel_postlevelid = #{personnel_postlevelid}
					</if>
					<if test="personnel_trialstarttime != null">
						and pm.personnel_trialstarttime = #{personnel_trialstarttime}
					</if>
					<if test="personnel_trialendtime != null">
						and pm.personnel_trialendtime = #{personnel_trialendtime}
					</if>
					<if test="personnel_traintime != null">
						and pm.personnel_traintime = #{personnel_traintime}
					</if>
					<if test="personnel_trainremark != null">
						and pm.personnel_trainremark = #{personnel_trainremark}
					</if>
					<if test="personnel_employmentform != null">
						and pm.personnel_employmentform = #{personnel_employmentform}
					</if>
					<if test="personnel_positivetime != null">
						and pm.personnel_positivetime = #{personnel_positivetime}
					</if>
					<if test="personnel_bankname != null">
						and pm.personnel_bankname = #{personnel_bankname}
					</if>
					<if test="personnel_bankcardcode != null">
						and pm.personnel_bankcardcode = #{personnel_bankcardcode}
					</if>
					<if test="personnel_socialsecurity != null">
						and pm.personnel_socialsecurity = #{personnel_socialsecurity}
					</if>
					<if test="personnel_socialinfo != null">
						and pm.personnel_socialinfo = #{personnel_socialinfo}
					</if>
					<if test="personnel_contractstarttime != null">
						and pm.personnel_contractstarttime = #{personnel_contractstarttime}
					</if>
					<if test="personnel_contractendtime != null">
						and pm.personnel_contractendtime = #{personnel_contractendtime}
					</if>
					<if test="personnel_workage != null">
						and pm.personnel_workage = #{personnel_workage}
					</if>
					<if test="personnel_seniority != null">
						and pm.personnel_seniority = #{personnel_seniority}
					</if>
					<if test="personnel_state != null">
						and pm.personnel_state = #{personnel_state}
					</if>
					<if test="personnel_remark != null">
						and pm.personnel_remark = #{personnel_remark}
					</if>
					<if test="personnel_accounttype != null">
						and pm.personnel_accounttype = #{personnel_accounttype}
					</if>
					<if test="enable_flag != null">
						and pm.enable_flag = #{enable_flag}
					</if>
					<if test="create_user != null">
						and pm.create_user = #{create_user}
					</if>
					<if test="create_timestamp != null">
						and pm.create_timestamp = #{create_timestamp}
					</if>
					<if test="last_update_user != null">
						and pm.last_update_user = #{last_update_user}
					</if>
					<if test="last_update_timestamp != null">
						and pm.last_update_timestamp = #{last_update_timestamp}
					</if>
					<if test="leave_type !=null">
						and pm.leave_type =#{leave_type}
					</if>
					<if test="leave_time !=null">
						and pm.leave_time =#{leave_time}
					</if>
					<if test="personnel_QQ !=null">
						and pm.personnel_QQ =#{personnel_QQ}
					</if>
					<if test="personnel_enter_state !=null">
						and pm.personnel_enter_state =#{personnel_enter_state}
					</if>
					<if test="flow1 != null">
						and pm.flow1 = #{flow1}
					</if>
					<if test="flow2 != null">
						and pm.flow2 = #{flow2}
					</if>
					<if test="flow3 != null">
						and pm.flow3 = #{flow3}
					</if>
					<if test="flow4 != null">
						and pm.flow4 = #{flow4}
					</if>
					<if test="flow5 != null">
						and pm.flow5 = #{flow5}
					</if>
				</where>
			UNION ALL
		
			SELECT 
				DISTINCT
				pm.personnel_id,
				pm.personnel_encryptionid,
				pm.personnel_code,
				pm.personnel_shortcode,
				CONCAT(pm.personnel_name,"(兼)") as personnel_name,
				pm.personnel_sex,
				pm.personnel_age,
				DATE_FORMAT(pm.personnel_birthtime,'%Y-%m-%d') AS personnel_birthtime_str,
				pm.personnel_birthtime,
				pm.personnel_identitycode,
				DATE_FORMAT(pm.personnel_identitytime,'%Y-%m-%d') AS personnel_identitytime_str,
				pm.personnel_identitytime,
				pm.personnel_account,
				pm.personnel_education,
				pm.personnel_politicsstatus,
				pm.personnel_marriage,
				pm.personnel_nation,
				pm.personnel_stature,
				pm.personnel_weight,
				pm.personnel_contacttel,
				pm.personnel_corporationtel,
				pm.personnel_extensiontel,
				pm.personnel_emial,
				pm.personnel_school,
				pm.personnel_specialty,
				DATE_FORMAT(pm.personnel_entrancetime,'%Y-%m-%d') AS personnel_entrancetime_str,
				pm.personnel_entrancetime,
				DATE_FORMAT(pm.personnel_graduatetime,'%Y-%m-%d') AS personnel_graduatetime_str,
				pm.personnel_graduatetime,
				pm.personnel_laborcontract,
				pm.personnel_reinstated,
				pm.personnel_confidential,
				pm.personnel_pay,
				pm.personnel_emergencyname,
				pm.personnel_emergencyremark,
				pm.personnel_accountaddress,
				pm.personnel_emergencytel,
				pm.personnel_othertel,
				pm.personnel_regionnumber,
				pm.personnel_organid,
				(SELECT getCompanyName(personnel_deptid)) AS personnel_organcode,
				scp.dept_id AS personnel_deptid,
				pm.personnel_deptcode,
				scp.dept_name AS personnel_deptname,
				pm.personnel_team,
				pm.personnel_postid,
				scp.post_name as personnel_postname,
				pm.personnel_postlevelid,
				DATE_FORMAT(pm.personnel_trialstarttime,'%Y-%m-%d') AS personnel_trialstarttime_str,
				pm.personnel_trialstarttime,
				DATE_FORMAT(pm.personnel_trialendtime,'%Y-%m-%d') AS personnel_trialendtime_str,
				pm.personnel_trialendtime,
				DATE_FORMAT(pm.personnel_traintime,'%Y-%m-%d') AS personnel_traintime_str,
				pm.personnel_traintime,
				pm.personnel_trainremark,
				pm.personnel_employmentform,
				DATE_FORMAT(pm.personnel_positivetime,'%Y-%m-%d') AS personnel_positivetime_str,
				pm.personnel_positivetime,
				pm.personnel_bankname,
				pm.personnel_bankcardcode,
				pm.personnel_socialsecurity,
				pm.personnel_socialinfo,
				DATE_FORMAT(pm.personnel_contractstarttime,'%Y-%m-%d') AS personnel_contractstarttime_str,
				pm.personnel_contractstarttime,
				DATE_FORMAT(pm.personnel_contractendtime,'%Y-%m-%d') AS personnel_contractendtime_str,
				pm.personnel_contractendtime,
				pm.personnel_workage,
				pm.personnel_seniority,
				pm.personnel_state,
				pm.personnel_remark,
				pm.personnel_accounttype,
				pm.enable_flag,
				pm.create_user,
				DATE_FORMAT(pm.create_timestamp,'%Y-%m-%d %H:%i:%s') AS create_timestamp_str,
				pm.create_timestamp,
				pm.last_update_user,
				DATE_FORMAT(pm.last_update_timestamp,'%Y-%m-%d %H:%i:%s') AS last_update_timestamp_str,
				pm.last_update_timestamp,
				pm.leave_type,
				pm.leave_time,
				DATE_FORMAT(pm.leave_time,'%Y-%m-%d %H:%i:%s') AS leave_time_str,
				pm.personnel_QQ,
				pm.personnel_enter_state,
				pm.flow1,
				pm.flow2,
				pm.flow3,
				pm.flow4,
				pm.flow5
		
			FROM 
				sys_concurrent_post scp, pm_personnel pm
			WHERE
				scp.personnel_id = pm.personnel_id
					<if test="personnel_id != null">
						and pm.personnel_id = #{personnel_id}
					</if>
					<if test="personnel_encryptionid != null">
						and pm.personnel_encryptionid = #{personnel_encryptionid}
					</if>
					<if test="personnel_code != null">
						and pm.personnel_code = #{personnel_code}
					</if>
					<if test="personnel_shortcode != null">
						and pm.personnel_shortcode = #{personnel_shortcode}
					</if>
					<if test="personnel_name != null">
						and pm.personnel_name = #{personnel_name}
					</if>
					<if test="personnel_sex != null">
						and pm.personnel_sex = #{personnel_sex}
					</if>
					<if test="personnel_age != null">
						and pm.personnel_age = #{personnel_age}
					</if>
					<if test="personnel_birthtime != null">
						and pm.personnel_birthtime = #{personnel_birthtime}
					</if>
					<if test="personnel_identitycode != null">
						and pm.personnel_identitycode = #{personnel_identitycode}
					</if>
					<if test="personnel_identitytime != null">
						and pm.personnel_identitytime = #{personnel_identitytime}
					</if>
					<if test="personnel_account != null">
						and pm.personnel_account = #{personnel_account}
					</if>
					<if test="personnel_education != null">
						and pm.personnel_education = #{personnel_education}
					</if>
					<if test="personnel_politicsstatus != null">
						and pm.personnel_politicsstatus = #{personnel_politicsstatus}
					</if>
					<if test="personnel_marriage != null">
						and pm.personnel_marriage = #{personnel_marriage}
					</if>
					<if test="personnel_nation != null">
						and pm.personnel_nation = #{personnel_nation}
					</if>
					<if test="personnel_stature != null">
						and pm.personnel_stature = #{personnel_stature}
					</if>
					<if test="personnel_weight != null">
						and pm.personnel_weight = #{personnel_weight}
					</if>
					<if test="personnel_contacttel != null">
						and pm.personnel_contacttel = #{personnel_contacttel}
					</if>
					<if test="personnel_corporationtel != null">
						and pm.personnel_corporationtel = #{personnel_corporationtel}
					</if>
					<if test="personnel_extensiontel != null">
						and pm.personnel_extensiontel = #{personnel_extensiontel}
					</if>
					<if test="personnel_emial != null">
						and pm.personnel_emial = #{personnel_emial}
					</if>
					<if test="personnel_school != null">
						and pm.personnel_school = #{personnel_school}
					</if>
					<if test="personnel_specialty != null">
						and pm.personnel_specialty = #{personnel_specialty}
					</if>
					<if test="personnel_entrancetime != null">
						and pm.personnel_entrancetime = #{personnel_entrancetime}
					</if>
					<if test="personnel_graduatetime != null">
						and pm.personnel_graduatetime = #{personnel_graduatetime}
					</if>
					<if test="personnel_laborcontract != null">
						and pm.personnel_laborcontract = #{personnel_laborcontract}
					</if>
					<if test="personnel_reinstated != null">
						and pm.personnel_reinstated = #{personnel_reinstated}
					</if>
					<if test="personnel_confidential != null">
						and pm.personnel_confidential = #{personnel_confidential}
					</if>
					<if test="personnel_pay != null">
						and pm.personnel_pay = #{personnel_pay}
					</if>
					<if test="personnel_emergencyname != null">
						and pm.personnel_emergencyname = #{personnel_emergencyname}
					</if>
					<if test="personnel_emergencyremark != null">
						and pm.personnel_emergencyremark = #{personnel_emergencyremark}
					</if>
					<if test="personnel_accountaddress != null">
						and pm.personnel_accountaddress = #{personnel_accountaddress}
					</if>
					<if test="personnel_emergencytel != null">
						and pm.personnel_emergencytel = #{personnel_emergencytel}
					</if>
					<if test="personnel_othertel != null">
						and pm.personnel_othertel = #{personnel_othertel}
					</if>
					<if test="personnel_regionnumber != null">
						and pm.personnel_regionnumber = #{personnel_regionnumber}
					</if>
					<if test="personnel_organid != null">
						and pm.personnel_organid = #{personnel_organid}
					</if>
					<if test="personnel_organcode != null">
						and pm.personnel_organcode = #{personnel_organcode}
					</if>
					<if test="personnel_deptid != null">
						AND scp.dept_id = #{personnel_deptid}
					</if>
					<if test="personnel_deptcode != null">
						and pm.personnel_deptcode = #{personnel_deptcode}
					</if>
					<if test="personnel_deptname != null">
						and pm.personnel_deptname = #{personnel_deptname}
					</if>
					<if test="personnel_team != null">
						and pm.personnel_team = #{personnel_team}
					</if>
					<if test="personnel_postid != null">
						and pm.personnel_postid = #{personnel_postid}
					</if>
					<if test="personnel_postname != null">
						and pm.personnel_postname = #{personnel_postname}
					</if>
					<if test="personnel_postlevelid != null">
						and pm.personnel_postlevelid = #{personnel_postlevelid}
					</if>
					<if test="personnel_trialstarttime != null">
						and pm.personnel_trialstarttime = #{personnel_trialstarttime}
					</if>
					<if test="personnel_trialendtime != null">
						and pm.personnel_trialendtime = #{personnel_trialendtime}
					</if>
					<if test="personnel_traintime != null">
						and pm.personnel_traintime = #{personnel_traintime}
					</if>
					<if test="personnel_trainremark != null">
						and pm.personnel_trainremark = #{personnel_trainremark}
					</if>
					<if test="personnel_employmentform != null">
						and pm.personnel_employmentform = #{personnel_employmentform}
					</if>
					<if test="personnel_positivetime != null">
						and pm.personnel_positivetime = #{personnel_positivetime}
					</if>
					<if test="personnel_bankname != null">
						and pm.personnel_bankname = #{personnel_bankname}
					</if>
					<if test="personnel_bankcardcode != null">
						and pm.personnel_bankcardcode = #{personnel_bankcardcode}
					</if>
					<if test="personnel_socialsecurity != null">
						and pm.personnel_socialsecurity = #{personnel_socialsecurity}
					</if>
					<if test="personnel_socialinfo != null">
						and pm.personnel_socialinfo = #{personnel_socialinfo}
					</if>
					<if test="personnel_contractstarttime != null">
						and pm.personnel_contractstarttime = #{personnel_contractstarttime}
					</if>
					<if test="personnel_contractendtime != null">
						and pm.personnel_contractendtime = #{personnel_contractendtime}
					</if>
					<if test="personnel_workage != null">
						and pm.personnel_workage = #{personnel_workage}
					</if>
					<if test="personnel_seniority != null">
						and pm.personnel_seniority = #{personnel_seniority}
					</if>
					<if test="personnel_state != null">
						and pm.personnel_state = #{personnel_state}
					</if>
					<if test="personnel_remark != null">
						and pm.personnel_remark = #{personnel_remark}
					</if>
					<if test="personnel_accounttype != null">
						and pm.personnel_accounttype = #{personnel_accounttype}
					</if>
					<if test="enable_flag != null">
						and pm.enable_flag = #{enable_flag}
					</if>
					<if test="create_user != null">
						and pm.create_user = #{create_user}
					</if>
					<if test="create_timestamp != null">
						and pm.create_timestamp = #{create_timestamp}
					</if>
					<if test="last_update_user != null">
						and pm.last_update_user = #{last_update_user}
					</if>
					<if test="last_update_timestamp != null">
						and pm.last_update_timestamp = #{last_update_timestamp}
					</if>
					<if test="leave_type !=null">
						and pm.leave_type =#{leave_type}
					</if>
					<if test="leave_time !=null">
						and pm.leave_time =#{leave_time}
					</if>
					<if test="personnel_QQ !=null">
						and pm.personnel_QQ =#{personnel_QQ}
					</if>
					<if test="personnel_enter_state !=null">
						and pm.personnel_enter_state =#{personnel_enter_state}
					</if>
					<if test="flow1 != null">
						and pm.flow1 = #{flow1}
					</if>
					<if test="flow2 != null">
						and pm.flow2 = #{flow2}
					</if>
					<if test="flow3 != null">
						and pm.flow3 = #{flow3}
					</if>
					<if test="flow4 != null">
						and pm.flow4 = #{flow4}
					</if>
					<if test="flow5 != null">
						and pm.flow5 = #{flow5}
					</if>
	</select>
	<!--根据提供的业务员部门ID以及职务编码 查找部门经理 -->
	<select id="searchforlcjl" parameterType="map" resultType="java.util.HashMap">
		select
		pm.personnel_id,
		pm.personnel_encryptionid,
		pm.personnel_code,
		pm.personnel_shortcode,
		pm.personnel_name,
		pm.personnel_sex,
		pm.personnel_age,
		date_format(pm.personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		pm.personnel_birthtime,
		pm.personnel_identitycode,
		date_format(pm.personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		pm.personnel_identitytime,
		pm.personnel_account,
		pm.personnel_education,
		pm.personnel_politicsstatus,
		pm.personnel_marriage,
		pm.personnel_nation,
		pm.personnel_stature,
		pm.personnel_weight,
		pm.personnel_contacttel,
		pm.personnel_corporationtel,
		pm.personnel_extensiontel,
		pm.personnel_emial,
		pm.personnel_school,
		pm.personnel_specialty,
		date_format(pm.personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		pm.personnel_entrancetime,
		date_format(pm.personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		pm.personnel_graduatetime,
		pm.personnel_laborcontract,
		pm.personnel_reinstated,
		pm.personnel_confidential,
		pm.personnel_pay,
		pm.personnel_emergencyname,
		pm.personnel_emergencyremark,
		pm.personnel_accountaddress,
		pm.personnel_emergencytel,
		pm.personnel_othertel,
		pm.personnel_regionnumber,
		pm.personnel_organid,
		pm.personnel_organcode,
		pm.personnel_deptid,
		pm.personnel_deptcode,
		pm.personnel_deptname,
		pm.personnel_team,
		pm.personnel_postid,
		pm.personnel_postname,
		pm.personnel_postlevelid,
		date_format(pm.personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		pm.personnel_trialstarttime,
		date_format(pm.personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		pm.personnel_trialendtime,
		date_format(pm.personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		pm.personnel_traintime,
		pm.personnel_trainremark,
		pm.personnel_employmentform,
		date_format(pm.personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		pm.personnel_positivetime,
		pm.personnel_bankname,
		pm.personnel_bankcardcode,
		pm.personnel_socialsecurity,
		pm.personnel_socialinfo,
		date_format(pm.personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		pm.personnel_contractstarttime,
		date_format(pm.personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		pm.personnel_contractendtime,
		pm.personnel_workage,
		pm.personnel_seniority,
		pm.personnel_state,
		pm.personnel_remark,
		pm.personnel_accounttype,
		pm.enable_flag,
		pm.create_user,
		date_format(pm.create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		pm.create_timestamp,
		pm.last_update_user,
		date_format(pm.last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		pm.last_update_timestamp,
		pm.leave_type,
		pm.leave_time,
		date_format(pm.leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		pm.personnel_QQ,
		pm.personnel_enter_state,
		pm.flow1,
		pm.flow2,
		pm.flow3,
		pm.flow4,
		pm.flow5
		from

		pm_personnel pm,sys_post post,sys_dept dept

		WHERE

		pm.personnel_postId=post.post_id

		AND

		post.post_deptId=dept.dept_id

		AND

		pm.personnel_deptId=dept.dept_id
		
		AND

		post.post_number=#{post_number}

		AND

		dept.dept_id=#{dept_Id}  and pm.enable_flag=1
	</select>
	<!-- 根据提供的业务员部门ID以及职务编码 查找父级部门 副总经理？ -->
	<select id="searchforlcfzjl" parameterType="map" resultType="java.util.HashMap">
		SELECT
		pm.personnel_id,
		pm.personnel_encryptionid,
		pm.personnel_code,
		pm.personnel_shortcode,
		pm.personnel_name,
		pm.personnel_sex,
		pm.personnel_age,
		date_format(pm.personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		pm.personnel_birthtime,
		pm.personnel_identitycode,
		date_format(pm.personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		pm.personnel_identitytime,
		pm.personnel_account,
		pm.personnel_education,
		pm.personnel_politicsstatus,
		pm.personnel_marriage,
		pm.personnel_nation,
		pm.personnel_stature,
		pm.personnel_weight,
		pm.personnel_contacttel,
		pm.personnel_corporationtel,
		pm.personnel_extensiontel,
		pm.personnel_emial,
		pm.personnel_school,
		pm.personnel_specialty,
		date_format(pm.personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		pm.personnel_entrancetime,
		date_format(pm.personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		pm.personnel_graduatetime,
		pm.personnel_laborcontract,
		pm.personnel_reinstated,
		pm.personnel_confidential,
		pm.personnel_pay,
		pm.personnel_emergencyname,
		pm.personnel_emergencyremark,
		pm.personnel_accountaddress,
		pm.personnel_emergencytel,
		pm.personnel_othertel,
		pm.personnel_regionnumber,
		pm.personnel_organid,
		pm.personnel_organcode,
		pm.personnel_deptid,
		pm.personnel_deptcode,
		pm.personnel_deptname,
		pm.personnel_team,
		pm.personnel_postid,
		pm.personnel_postname,
		pm.personnel_postlevelid,
		date_format(pm.personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		pm.personnel_trialstarttime,
		date_format(pm.personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		pm.personnel_trialendtime,
		date_format(pm.personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		pm.personnel_traintime,
		pm.personnel_trainremark,
		pm.personnel_employmentform,
		date_format(pm.personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		pm.personnel_positivetime,
		pm.personnel_bankname,
		pm.personnel_bankcardcode,
		pm.personnel_socialsecurity,
		pm.personnel_socialinfo,
		date_format(pm.personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		pm.personnel_contractstarttime,
		date_format(pm.personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		pm.personnel_contractendtime,
		pm.personnel_workage,
		pm.personnel_seniority,
		pm.personnel_state,
		pm.personnel_remark,
		pm.personnel_accounttype,
		pm.enable_flag,
		pm.create_user,
		date_format(pm.create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		pm.create_timestamp,
		pm.last_update_user,
		date_format(pm.last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		pm.last_update_timestamp,
		pm.leave_type,
		pm.leave_time,
		date_format(pm.leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		pm.personnel_QQ,
		pm.personnel_enter_state,
		pm.flow1,
		pm.flow2,
		pm.flow3,
		pm.flow4,
		pm.flow5
		FROM
		pm_personnel pm,sys_personnel_dept_concern pc,sys_post post
		WHERE
		pm.personnel_id=pc.personnel_id
		AND
		pm.personnel_postId=post.post_id
		AND
		pm.personnel_deptId=post.post_deptId
		AND
		post.post_number=#{post_number}
		AND
		pc.dept_id=(select dept_pid from sys_dept where dept_id=#{dept_Id}) and pc.dept_type='dept'  and pm.enable_flag=1
	</select>
	<!-- 根据提供的业务员部门ID以及职务编码 查找父级部门 总经理？ -->
	<select id="searchforlczjl" parameterType="map" resultType="java.util.HashMap">
		select
		pm.personnel_id,
		pm.personnel_encryptionid,
		pm.personnel_code,
		pm.personnel_shortcode,
		pm.personnel_name,
		pm.personnel_sex,
		pm.personnel_age,
		date_format(pm.personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		pm.personnel_birthtime,
		pm.personnel_identitycode,
		date_format(pm.personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		pm.personnel_identitytime,
		pm.personnel_account,
		pm.personnel_education,
		pm.personnel_politicsstatus,
		pm.personnel_marriage,
		pm.personnel_nation,
		pm.personnel_stature,
		pm.personnel_weight,
		pm.personnel_contacttel,
		pm.personnel_corporationtel,
		pm.personnel_extensiontel,
		pm.personnel_emial,
		pm.personnel_school,
		pm.personnel_specialty,
		date_format(pm.personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		pm.personnel_entrancetime,
		date_format(pm.personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		pm.personnel_graduatetime,
		pm.personnel_laborcontract,
		pm.personnel_reinstated,
		pm.personnel_confidential,
		pm.personnel_pay,
		pm.personnel_emergencyname,
		pm.personnel_emergencyremark,
		pm.personnel_accountaddress,
		pm.personnel_emergencytel,
		pm.personnel_othertel,
		pm.personnel_regionnumber,
		pm.personnel_organid,
		pm.personnel_organcode,
		pm.personnel_deptid,
		pm.personnel_deptcode,
		pm.personnel_deptname,
		pm.personnel_team,
		pm.personnel_postid,
		pm.personnel_postname,
		pm.personnel_postlevelid,
		date_format(pm.personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		pm.personnel_trialstarttime,
		date_format(pm.personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		pm.personnel_trialendtime,
		date_format(pm.personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		pm.personnel_traintime,
		pm.personnel_trainremark,
		pm.personnel_employmentform,
		date_format(pm.personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		pm.personnel_positivetime,
		pm.personnel_bankname,
		pm.personnel_bankcardcode,
		pm.personnel_socialsecurity,
		pm.personnel_socialinfo,
		date_format(pm.personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		pm.personnel_contractstarttime,
		date_format(pm.personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		pm.personnel_contractendtime,
		pm.personnel_workage,
		pm.personnel_seniority,
		pm.personnel_state,
		pm.personnel_remark,
		pm.personnel_accounttype,
		pm.enable_flag,
		pm.create_user,
		date_format(pm.create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		pm.create_timestamp,
		pm.last_update_user,
		date_format(pm.last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		pm.last_update_timestamp,
		pm.leave_type,
		pm.leave_time,
		date_format(pm.leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		pm.personnel_QQ,
		pm.personnel_enter_state,
		pm.flow1,
		pm.flow2,
		pm.flow3,
		pm.flow4,
		pm.flow5
		from
		pm_personnel pm,sys_dept dept,sys_post post
		WHERE
		pm.personnel_deptId=dept.dept_pid
		AND
		pm.personnel_postId=post.post_id
		AND
		post.post_deptId=dept.dept_pid
		AND
		post.post_number=#{post_number}
		AND
		dept.dept_id=(select dept_pid from sys_dept where dept_id=#{dept_Id})  and pm.enable_flag=1
	</select>

	<!-- 根据提供的短工号查询员工的ID -->
	<select id="searchforNodept" parameterType="map" resultType="java.util.HashMap">
		select
		personnel_id,
		personnel_encryptionid,
		personnel_code,
		personnel_shortcode,
		personnel_name,
		personnel_sex,
		personnel_age,
		date_format(personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		personnel_birthtime,
		personnel_identitycode,
		date_format(personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		personnel_identitytime,
		personnel_account,
		personnel_education,
		personnel_politicsstatus,
		personnel_marriage,
		personnel_nation,
		personnel_stature,
		personnel_weight,
		personnel_contacttel,
		personnel_corporationtel,
		personnel_extensiontel,
		personnel_emial,
		personnel_school,
		personnel_specialty,
		date_format(personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		personnel_entrancetime,
		date_format(personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		personnel_graduatetime,
		personnel_laborcontract,
		personnel_reinstated,
		personnel_confidential,
		personnel_pay,
		personnel_emergencyname,
		personnel_emergencyremark,
		personnel_accountaddress,
		personnel_emergencytel,
		personnel_othertel,
		personnel_regionnumber,
		personnel_organid,
		personnel_organcode,
		personnel_deptid,
		personnel_deptcode,
		personnel_deptname,
		personnel_team,
		personnel_postid,
		personnel_postname,
		personnel_postlevelid,
		date_format(personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		personnel_trialstarttime,
		date_format(personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		personnel_trialendtime,
		date_format(personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		personnel_traintime,
		personnel_trainremark,
		personnel_employmentform,
		date_format(personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		personnel_positivetime,
		personnel_bankname,
		personnel_bankcardcode,
		personnel_socialsecurity,
		personnel_socialinfo,
		date_format(personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		personnel_contractstarttime,
		date_format(personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		personnel_contractendtime,
		personnel_workage,
		personnel_seniority,
		personnel_state,
		personnel_remark,
		personnel_accounttype,
		enable_flag,
		create_user,
		date_format(create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		create_timestamp,
		last_update_user,
		date_format(last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		last_update_timestamp,
		leave_type,
		leave_time,
		date_format(leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		personnel_QQ,
		personnel_enter_state,
		flow1,
		flow2,
		flow3,
		flow4,
		flow5
		from pm_personnel
		<where>
			<if test="personnel_shortcode != null">
				personnel_shortcode =#{personnel_shortcode}
			</if>
		</where>
	</select>
	<select id="getPostInfo" parameterType="int" resultType="java.util.HashMap">
	 SELECT * from sys_post where post_id= (SELECT personnel_postId from pm_personnel where personnel_id=#{personnel_id})  and post_number="CJZG"
	</select>
	
	<!-- 获取部门上级信息 -->
	<select id="getByPost" parameterType="map" resultType="PmPersonnel">
		select
        				l.personnel_id,
        				l.personnel_encryptionid,
        				l.personnel_code,
        				l.personnel_shortcode,
        				l.personnel_attendancecode,
        				l.personnel_name,
        				l.personnel_sex,
        				l.personnel_age,
						date_format(l.personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
        				l.personnel_birthtime,
        				l.personnel_identitycode,
						date_format(l.personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
        				l.personnel_identitytime,
        				l.personnel_account,
        				l.personnel_education,
        				l.personnel_politicsstatus,
        				l.personnel_marriage,
        				l.personnel_nation,
        				l.personnel_stature,
        				l.personnel_weight,
        				l.personnel_contacttel,
        				l.personnel_corporationtel,
        				l.personnel_extensiontel,
        				l.personnel_emial,
        				l.personnel_school,
        				l.personnel_specialty,
						date_format(l.personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
        				l.personnel_entrancetime,
						date_format(l.personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
        				l.personnel_graduatetime,
        				l.personnel_laborcontract,
        				l.personnel_reinstated,
        				l.personnel_confidential,
        				l.personnel_pay,
        				l.personnel_emergencyname,
        				l.personnel_emergencyremark,
        				l.personnel_accountaddress,
        				l.personnel_emergencytel,
        				l.personnel_othertel,
        				l.personnel_regionnumber,
        				l.personnel_organid,
        				l.personnel_organcode,
        				l.personnel_deptid,
        				l.personnel_deptcode,
        				l.personnel_deptname,
        				l.personnel_team,
        				l.personnel_postid,
        				l.personnel_postname,
        				l.personnel_postlevelid,
						date_format(l.personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
        				l.personnel_trialstarttime,
						date_format(l.personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
        				l.personnel_trialendtime,
						date_format(l.personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
        				l.personnel_traintime,
        				l.personnel_trainremark,
        				l.personnel_employmentform,
						date_format(l.personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
        				l.personnel_positivetime,
        				l.personnel_bankname,
        				l.personnel_bankcardcode,
        				l.personnel_socialsecurity,
        				l.personnel_socialinfo,
						date_format(l.personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
        				l.personnel_contractstarttime,
						date_format(l.personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
        				l.personnel_contractendtime,
        				l.personnel_workage,
        				l.personnel_seniority,
        				l.personnel_state,
        				l.personnel_remark,
        				l.personnel_accounttype,
        				l.personnel_salary,
        				l.enable_flag,
        				l.create_user,
						date_format(l.create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
        				l.create_timestamp,
        				l.last_update_user,
						date_format(l.last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
        				l.last_update_timestamp,
        				l.leave_type,
        				l.leave_time,
        				date_format(l.leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
        				l.personnel_QQ,
        				l.personnel_enter_state,
        				l.personnel_shortTel,
        				l.flow1,
        				l.flow2,
        				l.flow3,
        				l.flow4,
        				l.flow5
        	from
        		pm_personnel  l,sys_post p
        	where
        			l.enable_flag=1 and p.enable_flag=0
        			and	p.post_deptid = #{post_deptid}
        			and	p.post_number = #{post_number}
        			and	personnel_postId =p.post_id
        			and	personnel_deptId =p.post_deptid
	</select>
	<select id="getPmPersonnelByIds" parameterType="java.util.List" resultType="java.util.Map">
		select 
			personnel_id,
			personnel_shortcode,
			personnel_name,
			(SELECT job_code from wms_inve_job where job_encode=(SELECT  post_number from sys_post where post_id=personnel_postId )) as post_number
		from pm_personnel 
		where enable_flag='1' and personnel_id in
		<foreach item="idItem" collection="list" open="(" separator="," close=")">
			#{idItem}
		</foreach>
	</select>
	<!-- 通过传递的部门ID和相关职务 查询相对应的数据信息 -->
	<select id="searchforlcjxjl" parameterType="map" resultType="java.util.HashMap">
		select
		pm.personnel_id,
		pm.personnel_encryptionid,
		pm.personnel_code,
		pm.personnel_shortcode,
		pm.personnel_name,
		pm.personnel_sex,
		pm.personnel_age,
		date_format(pm.personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
		pm.personnel_birthtime,
		pm.personnel_identitycode,
		date_format(pm.personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
		pm.personnel_identitytime,
		pm.personnel_account,
		pm.personnel_education,
		pm.personnel_politicsstatus,
		pm.personnel_marriage,
		pm.personnel_nation,
		pm.personnel_stature,
		pm.personnel_weight,
		pm.personnel_contacttel,
		pm.personnel_corporationtel,
		pm.personnel_extensiontel,
		pm.personnel_emial,
		pm.personnel_school,
		pm.personnel_specialty,
		date_format(pm.personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
		pm.personnel_entrancetime,
		date_format(pm.personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
		pm.personnel_graduatetime,
		pm.personnel_laborcontract,
		pm.personnel_reinstated,
		pm.personnel_confidential,
		pm.personnel_pay,
		pm.personnel_emergencyname,
		pm.personnel_emergencyremark,
		pm.personnel_accountaddress,
		pm.personnel_emergencytel,
		pm.personnel_othertel,
		pm.personnel_regionnumber,
		pm.personnel_organid,
		pm.personnel_organcode,
		pm.personnel_deptid,
		pm.personnel_deptcode,
		pm.personnel_deptname,
		pm.personnel_team,
		pm.personnel_postid,
		pm.personnel_postname,
		pm.personnel_postlevelid,
		date_format(pm.personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
		pm.personnel_trialstarttime,
		date_format(pm.personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
		pm.personnel_trialendtime,
		date_format(pm.personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
		pm.personnel_traintime,
		pm.personnel_trainremark,
		pm.personnel_employmentform,
		date_format(pm.personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
		pm.personnel_positivetime,
		pm.personnel_bankname,
		pm.personnel_bankcardcode,
		pm.personnel_socialsecurity,
		pm.personnel_socialinfo,
		date_format(pm.personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
		pm.personnel_contractstarttime,
		date_format(pm.personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
		pm.personnel_contractendtime,
		pm.personnel_workage,
		pm.personnel_seniority,
		pm.personnel_state,
		pm.personnel_remark,
		pm.personnel_accounttype,
		pm.enable_flag,
		pm.create_user,
		date_format(pm.create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
		pm.create_timestamp,
		pm.last_update_user,
		date_format(pm.last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
		pm.last_update_timestamp,
		pm.leave_type,
		pm.leave_time,
		date_format(pm.leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
		pm.personnel_QQ,
		pm.personnel_enter_state,
		pm.flow1,
		pm.flow2,
		pm.flow3,
		pm.flow4,
		pm.flow5
		from

		pm_personnel pm,sys_post post,sys_dept dept

		WHERE

		pm.personnel_postId=post.post_id

		AND

		post.post_deptId=dept.dept_id

		AND

		pm.personnel_deptId=dept.dept_id
		
		AND

		post.post_number=#{post_number}

		AND

		dept.dept_id=#{dept_Id}  and pm.enable_flag=1
	</select>
	
	<select id="getPersonnelByPersonnelId" parameterType="int" resultType="map">
		SELECT 
			(SELECT getCompanyName(personnel_deptid)) AS companyName,
			personnel_id,
			personnel_encryptionId,
			personnel_code,
			personnel_shortCode,
			personnel_attendanceCode,
			personnel_name,
			personnel_sex,
			personnel_age,
			personnel_birthTime,
			personnel_identityCode,
			personnel_identityTime,
			personnel_account,
			personnel_education,
			personnel_politicsStatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contactTel,
			personnel_corporationTel,
			personnel_extensionTel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			personnel_entranceTime,
			personnel_graduateTime,
			personnel_laborContract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyName,
			personnel_emergencyRemark,
			personnel_accountAddress,
			personnel_emergencyTel,
			personnel_otherTel,
			personnel_regionNumber,
			personnel_deptId,
			personnel_deptCode,
			personnel_deptName,
			personnel_team,
			personnel_postId,
			personnel_postName,
			personnel_postLevelId,
			personnel_trialStartTime,
			personnel_trialEndTime,
			personnel_trainTime,
			personnel_trainRemark,
			personnel_employmentForm,
			personnel_positiveTime,
			personnel_bankName,
			personnel_bankCardCode,
			personnel_socialSecurity,
			personnel_socialInfo,
			personnel_contractStartTime,
			personnel_contractEndTime,
			personnel_workAge,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accountType,
			personnel_salary,
			enable_flag,
			create_user,
			create_timestamp,
			last_update_user,
			last_update_timestamp,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5,
			personnel_QQ,
			personnel_enter_state,
			leave_type,
			leave_time,
			personnel_shortTel,
			rank_name,
			rank_id,
			personnel_bank_title,
			bank_province,
			bank_city,
			post_title_id,
			post_title_name
		FROM 
			pm_personnel 
		WHERE 
			personnel_id = #{personne_id}
	</select>
	
	<select id="getPersonnelByPersonnelId2" parameterType="int" resultType="PmPersonnel">
		SELECT 
			(SELECT getCompanyName(personnel_deptid)) AS companyName,
			personnel_id,
			personnel_encryptionId,
			personnel_code,
			personnel_shortCode,
			personnel_attendanceCode,
			personnel_name,
			personnel_sex,
			personnel_age,
			personnel_birthTime,
			personnel_identityCode,
			personnel_identityTime,
			personnel_account,
			personnel_education,
			personnel_politicsStatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contactTel,
			personnel_corporationTel,
			personnel_extensionTel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			personnel_entranceTime,
			personnel_graduateTime,
			personnel_laborContract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyName,
			personnel_emergencyRemark,
			personnel_accountAddress,
			personnel_emergencyTel,
			personnel_otherTel,
			personnel_regionNumber,
			personnel_deptId,
			personnel_deptCode,
			personnel_deptName,
			personnel_team,
			personnel_postId,
			personnel_postName,
			personnel_postLevelId,
			personnel_trialStartTime,
			personnel_trialEndTime,
			personnel_trainTime,
			personnel_trainRemark,
			personnel_employmentForm,
			personnel_positiveTime,
			personnel_bankName,
			personnel_bankCardCode,
			personnel_socialSecurity,
			personnel_socialInfo,
			personnel_contractStartTime,
			personnel_contractEndTime,
			personnel_workAge,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accountType,
			personnel_salary,
			enable_flag,
			create_user,
			create_timestamp,
			last_update_user,
			last_update_timestamp,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5,
			personnel_QQ,
			personnel_enter_state,
			leave_type,
			leave_time,
			personnel_shortTel,
			rank_name,
			rank_id,
			personnel_bank_title,
			bank_province,
			bank_city,
			post_title_id,
			post_title_name
		FROM 
			pm_personnel 
		where personnel_id = #{personnel_id}
	</select>
	
	<select id="getZhongFenZongByDeptId" parameterType="map" resultType="PmPersonnel">
			SELECT 
			(SELECT getCompanyName(personnel_deptid)) AS companyName,
			personnel_id,
			personnel_encryptionId,
			personnel_code,
			personnel_shortCode,
			personnel_attendanceCode,
			personnel_name,
			personnel_sex,
			personnel_age,
			personnel_birthTime,
			personnel_identityCode,
			personnel_identityTime,
			personnel_account,
			personnel_education,
			personnel_politicsStatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contactTel,
			personnel_corporationTel,
			personnel_extensionTel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			personnel_entranceTime,
			personnel_graduateTime,
			personnel_laborContract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyName,
			personnel_emergencyRemark,
			personnel_accountAddress,
			personnel_emergencyTel,
			personnel_otherTel,
			personnel_regionNumber,
			personnel_deptId,
			personnel_deptCode,
			personnel_deptName,
			personnel_team,
			personnel_postId,
			personnel_postName,
			personnel_postLevelId,
			personnel_trialStartTime,
			personnel_trialEndTime,
			personnel_trainTime,
			personnel_trainRemark,
			personnel_employmentForm,
			personnel_positiveTime,
			personnel_bankName,
			personnel_bankCardCode,
			personnel_socialSecurity,
			personnel_socialInfo,
			personnel_contractStartTime,
			personnel_contractEndTime,
			personnel_workAge,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accountType,
			personnel_salary,
			enable_flag,
			create_user,
			create_timestamp,
			last_update_user,
			last_update_timestamp,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5,
			personnel_QQ,
			personnel_enter_state,
			leave_type,
			leave_time,
			personnel_shortTel,
			rank_name,
			rank_id,
			personnel_bank_title,
			bank_province,
			bank_city,
			post_title_id,
			post_title_name
		FROM 
			pm_personnel 
		where personnel_id =(select a.personnel_id from (SELECT getCommonCenterManagerId(#{personnel_id},#{personnel_deptid}) as personnel_id) as a)
	</select>
	<select id="getFuZongByDeptId" parameterType="map" resultType="PmPersonnel">
			SELECT 
			(SELECT getCompanyName(personnel_deptid)) AS companyName,
			personnel_id,
			personnel_encryptionId,
			personnel_code,
			personnel_shortCode,
			personnel_attendanceCode,
			personnel_name,
			personnel_sex,
			personnel_age,
			personnel_birthTime,
			personnel_identityCode,
			personnel_identityTime,
			personnel_account,
			personnel_education,
			personnel_politicsStatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contactTel,
			personnel_corporationTel,
			personnel_extensionTel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			personnel_entranceTime,
			personnel_graduateTime,
			personnel_laborContract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyName,
			personnel_emergencyRemark,
			personnel_accountAddress,
			personnel_emergencyTel,
			personnel_otherTel,
			personnel_regionNumber,
			personnel_deptId,
			personnel_deptCode,
			personnel_deptName,
			personnel_team,
			personnel_postId,
			personnel_postName,
			personnel_postLevelId,
			personnel_trialStartTime,
			personnel_trialEndTime,
			personnel_trainTime,
			personnel_trainRemark,
			personnel_employmentForm,
			personnel_positiveTime,
			personnel_bankName,
			personnel_bankCardCode,
			personnel_socialSecurity,
			personnel_socialInfo,
			personnel_contractStartTime,
			personnel_contractEndTime,
			personnel_workAge,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accountType,
			personnel_salary,
			enable_flag,
			create_user,
			create_timestamp,
			last_update_user,
			last_update_timestamp,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5,
			personnel_QQ,
			personnel_enter_state,
			leave_type,
			leave_time,
			personnel_shortTel,
			rank_name,
			rank_id,
			personnel_bank_title,
			bank_province,
			bank_city,
			post_title_id,
			post_title_name
		FROM 
			pm_personnel 
		where personnel_id =(select a.personnel_id from (SELECT getCommonViceGeneralManagerId(#{personnel_id},#{personnel_deptid}) as personnel_id) as a)
	</select>
	<select id="getBuMenJingLiByDeptId" parameterType="map" resultType="PmPersonnel">
			SELECT 
			(SELECT getCompanyName(personnel_deptid)) AS companyName,
			personnel_id,
			personnel_encryptionId,
			personnel_code,
			personnel_shortCode,
			personnel_attendanceCode,
			personnel_name,
			personnel_sex,
			personnel_age,
			personnel_birthTime,
			personnel_identityCode,
			personnel_identityTime,
			personnel_account,
			personnel_education,
			personnel_politicsStatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contactTel,
			personnel_corporationTel,
			personnel_extensionTel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			personnel_entranceTime,
			personnel_graduateTime,
			personnel_laborContract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyName,
			personnel_emergencyRemark,
			personnel_accountAddress,
			personnel_emergencyTel,
			personnel_otherTel,
			personnel_regionNumber,
			personnel_deptId,
			personnel_deptCode,
			personnel_deptName,
			personnel_team,
			personnel_postId,
			personnel_postName,
			personnel_postLevelId,
			personnel_trialStartTime,
			personnel_trialEndTime,
			personnel_trainTime,
			personnel_trainRemark,
			personnel_employmentForm,
			personnel_positiveTime,
			personnel_bankName,
			personnel_bankCardCode,
			personnel_socialSecurity,
			personnel_socialInfo,
			personnel_contractStartTime,
			personnel_contractEndTime,
			personnel_workAge,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accountType,
			personnel_salary,
			enable_flag,
			create_user,
			create_timestamp,
			last_update_user,
			last_update_timestamp,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5,
			personnel_QQ,
			personnel_enter_state,
			leave_type,
			leave_time,
			personnel_shortTel,
			rank_name,
			rank_id,
			personnel_bank_title,
			bank_province,
			bank_city,
			post_title_id,
			post_title_name
		FROM 
			pm_personnel
		where personnel_id =(select a.personnel_id from (SELECT getCommonDeptManageId(#{personnel_id},#{personnel_deptid}) as personnel_id) as a)
	</select>
	
	<select id="getSysConcurrentPost" parameterType="map" resultType="int">
		SELECT COUNT(1) FROM sys_concurrent_post WHERE personnel_id=#{personnel_id} AND dept_id =#{dept_id}
	</select>
	
	<select id="getPersonnelByPersonnelIdAndDeptId" parameterType="map" resultType="map">
		SELECT 
			(SELECT getCompanyName(personnel_deptid)) AS companyName,
			personnel_id,
			personnel_encryptionId,
			personnel_code,
			personnel_shortCode,
			personnel_attendanceCode,
			personnel_name,
			personnel_sex,
			personnel_age,
			personnel_birthTime,
			personnel_identityCode,
			personnel_identityTime,
			personnel_account,
			personnel_education,
			personnel_politicsStatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contactTel,
			personnel_corporationTel,
			personnel_extensionTel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			personnel_entranceTime,
			personnel_graduateTime,
			personnel_laborContract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyName,
			personnel_emergencyRemark,
			personnel_accountAddress,
			personnel_emergencyTel,
			personnel_otherTel,
			personnel_regionNumber,
			personnel_deptId,
			personnel_deptCode,
			personnel_deptName,
			personnel_team,
			personnel_postId,
			personnel_postName,
			personnel_postLevelId,
			personnel_trialStartTime,
			personnel_trialEndTime,
			personnel_trainTime,
			personnel_trainRemark,
			personnel_employmentForm,
			personnel_positiveTime,
			personnel_bankName,
			personnel_bankCardCode,
			personnel_socialSecurity,
			personnel_socialInfo,
			personnel_contractStartTime,
			personnel_contractEndTime,
			personnel_workAge,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accountType,
			personnel_salary,
			enable_flag,
			create_user,
			create_timestamp,
			last_update_user,
			last_update_timestamp,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5,
			personnel_QQ,
			personnel_enter_state,
			leave_type,
			leave_time,
			personnel_shortTel,
			rank_name,
			rank_id,
			personnel_bank_title,
			bank_province,
			bank_city,
			post_title_id,
			post_title_name
		FROM 
			pm_personnel
		where personnel_id=#{personnel_id}
	</select>
	
	<select id="getDeptId" parameterType="map" resultType="int">
		select getCommonDeptId(#{personnel_id},#{personnel_deptid},#{type})		
	</select>
	
	<select id="getZongByPersonnelInfo" parameterType="map" resultType="PmPersonnel">
		SELECT 
			(SELECT getCompanyName(personnel_deptid)) AS companyName,
			personnel_id,
			personnel_encryptionId,
			personnel_code,
			personnel_shortCode,
			personnel_attendanceCode,
			personnel_name,
			personnel_sex,
			personnel_age,
			personnel_birthTime,
			personnel_identityCode,
			personnel_identityTime,
			personnel_account,
			personnel_education,
			personnel_politicsStatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contactTel,
			personnel_corporationTel,
			personnel_extensionTel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			personnel_entranceTime,
			personnel_graduateTime,
			personnel_laborContract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyName,
			personnel_emergencyRemark,
			personnel_accountAddress,
			personnel_emergencyTel,
			personnel_otherTel,
			personnel_regionNumber,
			personnel_deptId,
			personnel_deptCode,
			personnel_deptName,
			personnel_team,
			personnel_postId,
			personnel_postName,
			personnel_postLevelId,
			personnel_trialStartTime,
			personnel_trialEndTime,
			personnel_trainTime,
			personnel_trainRemark,
			personnel_employmentForm,
			personnel_positiveTime,
			personnel_bankName,
			personnel_bankCardCode,
			personnel_socialSecurity,
			personnel_socialInfo,
			personnel_contractStartTime,
			personnel_contractEndTime,
			personnel_workAge,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accountType,
			personnel_salary,
			enable_flag,
			create_user,
			create_timestamp,
			last_update_user,
			last_update_timestamp,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5,
			personnel_QQ,
			personnel_enter_state,
			leave_type,
			leave_time,
			personnel_shortTel,
			rank_name,
			rank_id,
			personnel_bank_title,
			bank_province,
			bank_city,
			post_title_id,
			post_title_name
		FROM 
			pm_personnel 
		where personnel_id = (select a.personnel_id from (SELECT getCommonGeneralManagerId(#{personnel_id},#{personnel_deptid}) as personnel_id) as a)
	</select>
	
	<select id="getPersonnelInfoById" parameterType="map" resultType="map">
		SELECT
			personnel_id AS salesman_id,
			personnel_name AS salesman_name,
			personnel_shortCode AS salesman_short_code,
			(
				SELECT
					d.dept_name
				FROM
					sys_dept d
				WHERE
					d.dept_id = p.personnel_deptId
			) AS team_name 
		FROM
			pm_personnel p
		WHERE
			p.personnel_id = #{salesman_id};
	</select>
	
	<select id="getPersonnelInfos" parameterType="map" resultType="map">
		select
			personnel_id,
			personnel_encryptionid,
			personnel_code,
			personnel_shortcode,
			personnel_name,
			personnel_sex,
			personnel_age,
			date_format(personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
			personnel_birthtime,
			personnel_identitycode,
			date_format(personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
			personnel_identitytime,
			personnel_account,
			personnel_education,
			personnel_politicsstatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contacttel,
			personnel_corporationtel,
			personnel_extensiontel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			date_format(personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
			personnel_entrancetime,
			date_format(personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
			personnel_graduatetime,
			personnel_laborcontract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyname,
			personnel_emergencyremark,
			personnel_accountaddress,
			personnel_emergencytel,
			personnel_othertel,
			personnel_regionnumber,
			personnel_organid,
			personnel_organcode,
			personnel_deptid,
			personnel_deptcode,
			personnel_deptname,
			personnel_team,
			personnel_postid,
			personnel_postname,
			personnel_postlevelid,
			date_format(personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
			personnel_trialstarttime,
			date_format(personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
			personnel_trialendtime,
			date_format(personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
			personnel_traintime,
			personnel_trainremark,
			personnel_employmentform,
			date_format(personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
			personnel_positivetime,
			personnel_bankname,
			personnel_bankcardcode,
			personnel_socialsecurity,
			personnel_socialinfo,
			date_format(personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
			personnel_contractstarttime,
			date_format(personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
			personnel_contractendtime,
			personnel_workage,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accounttype,
			enable_flag,
			create_user,
			date_format(create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
			create_timestamp,
			last_update_user,
			date_format(last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
			last_update_timestamp,
			leave_type,
			leave_time,
			date_format(leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
			personnel_QQ,
			personnel_enter_state,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5
			from
		pm_personnel
		where
		1=1
		<if test="personnel_id != null">
			AND personnel_id = #{personnel_id}
		</if>
		<if test="personnel_shortCode != null">
			AND personnel_shortCode = #{personnel_shortCode}
		</if>
		
	</select>
	
	<select id="getPersonnelByShortCode" parameterType="String" resultType="PmPersonnel">
		select
			personnel_id,
			personnel_encryptionid,
			personnel_code,
			personnel_shortcode,
			personnel_name,
			personnel_sex,
			personnel_age,
			date_format(personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
			personnel_birthtime,
			personnel_identitycode,
			date_format(personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
			personnel_identitytime,
			personnel_account,
			personnel_education,
			personnel_politicsstatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contacttel,
			personnel_corporationtel,
			personnel_extensiontel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			date_format(personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
			personnel_entrancetime,
			date_format(personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
			personnel_graduatetime,
			personnel_laborcontract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyname,
			personnel_emergencyremark,
			personnel_accountaddress,
			personnel_emergencytel,
			personnel_othertel,
			personnel_regionnumber,
			personnel_organid,
			personnel_organcode,
			personnel_deptid,
			personnel_deptcode,
			personnel_deptname,
			personnel_team,
			personnel_postid,
			personnel_postname,
			personnel_postlevelid,
			date_format(personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
			personnel_trialstarttime,
			date_format(personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
			personnel_trialendtime,
			date_format(personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
			personnel_traintime,
			personnel_trainremark,
			personnel_employmentform,
			date_format(personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
			personnel_positivetime,
			personnel_bankname,
			personnel_bankcardcode,
			personnel_socialsecurity,
			personnel_socialinfo,
			date_format(personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
			personnel_contractstarttime,
			date_format(personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
			personnel_contractendtime,
			personnel_workage,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accounttype,
			enable_flag,
			create_user,
			date_format(create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
			create_timestamp,
			last_update_user,
			date_format(last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
			last_update_timestamp,
			leave_type,
			leave_time,
			date_format(leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
			personnel_QQ,
			personnel_enter_state,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5
			from
		pm_personnel
		where
			personnel_shortcode = #{personnel_shortcode}
	</select>
	
	<select id="getPersonnelByPersonnelRegionnumber" parameterType="String" resultType="PmPersonnel">
		select
			personnel_id,
			personnel_encryptionid,
			personnel_code,
			personnel_shortcode,
			personnel_name,
			personnel_sex,
			personnel_age,
			date_format(personnel_birthtime,'%Y-%m-%d') as personnel_birthtime_str,
			personnel_birthtime,
			personnel_identitycode,
			date_format(personnel_identitytime,'%Y-%m-%d') as personnel_identitytime_str,
			personnel_identitytime,
			personnel_account,
			personnel_education,
			personnel_politicsstatus,
			personnel_marriage,
			personnel_nation,
			personnel_stature,
			personnel_weight,
			personnel_contacttel,
			personnel_corporationtel,
			personnel_extensiontel,
			personnel_emial,
			personnel_school,
			personnel_specialty,
			date_format(personnel_entrancetime,'%Y-%m-%d') as personnel_entrancetime_str,
			personnel_entrancetime,
			date_format(personnel_graduatetime,'%Y-%m-%d') as personnel_graduatetime_str,
			personnel_graduatetime,
			personnel_laborcontract,
			personnel_reinstated,
			personnel_confidential,
			personnel_pay,
			personnel_emergencyname,
			personnel_emergencyremark,
			personnel_accountaddress,
			personnel_emergencytel,
			personnel_othertel,
			personnel_regionnumber,
			personnel_organid,
			personnel_organcode,
			personnel_deptid,
			personnel_deptcode,
			personnel_deptname,
			personnel_team,
			personnel_postid,
			personnel_postname,
			personnel_postlevelid,
			date_format(personnel_trialstarttime,'%Y-%m-%d') as personnel_trialstarttime_str,
			personnel_trialstarttime,
			date_format(personnel_trialendtime,'%Y-%m-%d') as personnel_trialendtime_str,
			personnel_trialendtime,
			date_format(personnel_traintime,'%Y-%m-%d') as personnel_traintime_str,
			personnel_traintime,
			personnel_trainremark,
			personnel_employmentform,
			date_format(personnel_positivetime,'%Y-%m-%d') as personnel_positivetime_str,
			personnel_positivetime,
			personnel_bankname,
			personnel_bankcardcode,
			personnel_socialsecurity,
			personnel_socialinfo,
			date_format(personnel_contractstarttime,'%Y-%m-%d') as personnel_contractstarttime_str,
			personnel_contractstarttime,
			date_format(personnel_contractendtime,'%Y-%m-%d') as personnel_contractendtime_str,
			personnel_contractendtime,
			personnel_workage,
			personnel_seniority,
			personnel_state,
			personnel_remark,
			personnel_accounttype,
			enable_flag,
			create_user,
			date_format(create_timestamp,'%Y-%m-%d %H:%i:%s') as create_timestamp_str,
			create_timestamp,
			last_update_user,
			date_format(last_update_timestamp,'%Y-%m-%d %H:%i:%s') as last_update_timestamp_str,
			last_update_timestamp,
			leave_type,
			leave_time,
			date_format(leave_time,'%Y-%m-%d %H:%i:%s') as leave_time_str,
			personnel_QQ,
			personnel_enter_state,
			flow1,
			flow2,
			flow3,
			flow4,
			flow5
			from
		pm_personnel
		where
			personnel_regionnumber = #{personnel_regionnumber}
		AND enable_flag = 1
		AND personnel_state != 3
		order by personnel_id ASC
	</select>
    <!-- 获取用户菜单权限 -->
	<select id="getJurisdictionInfo" parameterType="int" resultType="String">
		SELECT menu_id from sys_user_role r, sys_role_menu_function f where user_id=#{personnel_id} and f.role_id=r.role_id
	</select>
</mapper> 
